loadjs=function(){var e=function(){},t={},a={},o={};function r(e,t){if(e){var r=o[e];if(a[e]=t,r)for(;r.length;)r[0](e,t),r.splice(0,1)}}function n(t,a){t.call&&(t={success:t}),a.length?(t.error||e)(a):(t.success||e)(t)}function s(t,a,o,r){var n,i,l=document,T=o.async,C=(o.numRetries||0)+1,c=o.before||e,p=t.replace(/^(css|img)!/,"");r=r||0,/(^css!|\.css$)/.test(t)?(n=!0,(i=l.createElement("link")).rel="stylesheet",i.href=p):/(^img!|\.(png|gif|jpg|svg)$)/.test(t)?(i=l.createElement("img")).src=p:((i=l.createElement("script")).src=t,i.async=void 0===T||T),!(i.onload=i.onerror=i.onbeforeload=function(e){var l=e.type[0];if(n&&"hideFocus"in i)try{i.sheet.cssText.length||(l="e")}catch(e){18!=e.code&&(l="e")}if("e"==l&&(r+=1)<C)return s(t,a,o,r);a(t,l,e.defaultPrevented)})!==c(t,i)&&l.head.appendChild(i)}function i(e,a,o){var i,l;if(a&&a.trim&&(i=a),l=(i?o:a)||{},i){if(i in t)throw"LoadJS";t[i]=!0}!function(e,t,a){var o,r,n=(e=e.push?e:[e]).length,i=n,l=[];for(o=function(e,a,o){if("e"==a&&l.push(e),"b"==a){if(!o)return;l.push(e)}--n||t(l)},r=0;r<i;r++)s(e[r],o,a)}(e,function(e){n(l,e),r(i,e)},l)}return i.ready=function(e,t){return function(e,t){e=e.push?e:[e];var r,n,s,i=[],l=e.length,T=l;for(r=function(e,a){a.length&&i.push(e),--T||t(i)};l--;)n=e[l],(s=a[n])?r(n,s):(o[n]=o[n]||[]).push(r)}(e,function(e){n(t,e)}),i},i.done=function(e){r(e,[])},i.reset=function(){t={},a={},o={}},i.isDefined=function(e){return e in t},i}();(TC=TC||{}).version="2.2.1 [2021-12-23 12:36:56]";!function(){if(!TC.apiLocation){var e;if(document.currentScript)e=document.currentScript;else{var t=document.getElementsByTagName("script");e=t[t.length-1]}var a=e.getAttribute("src");TC.apiLocation=a.substr(0,a.lastIndexOf("/")+1)}}();if(!TC.Consts){TC.Consts={};TC.Consts.OLNS="ol";TC.Consts.PROJ4JSOBJ="proj4";TC.Consts.GEOGRAPHIC="geographic";TC.Consts.UTM="UTM";TC.Consts.OLD_BROWSER_ALERT="TC.oldBrowserAlert";TC.Consts.CLUSTER_ANIMATION_DURATION=200;TC.Consts.ZOOM_ANIMATION_DURATION=300;TC.Consts.URL_MAX_LENGTH=2048;TC.Consts.METER_PRECISION=0;TC.Consts.DEGREE_PRECISION=5;TC.Consts.EXTENT_TOLERANCE=.9998;TC.Consts.SRSDOWNLOAD_GEOJSON_KML="EPSG:4326";TC.Consts.url={SPLIT_REGEX:/([^:]*:)?\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/,OL:"lib/ol/build/ol-sitna",OL_CONNECTOR:"TC/ol/ol",TEMPLATING_FULL:"lib/handlebars/handlebars",TEMPLATING_RUNTIME:"lib/handlebars/handlebars.runtime",TEMPLATING_HELPERS:"lib/handlebars/helpers.js",PROJ4JS:"lib/proj4js/proj4.js",EPSG:"https://epsg.io/",LOCALFORAGE:TC.apiLocation+"lib/localforage/localforage",D3C3:TC.apiLocation+"lib/d3c3/d3c3.min.js",CESIUM:TC.isDebug?"lib/cesium/build/cesium-sitna.js":"lib/cesium/build/cesium-sitna.min.js",CESIUM_CONNECTOR:"TC/cesium/cesium.js",JSNLOG:"lib/jsnlog/jsnlog.min.js",INTERACTJS:"lib/interactjs/interact.min.js",ERROR_LOGGER:TC.apiLocation+"errors/logger.ashx",PDFMAKE:TC.apiLocation+"lib/pdfmake/pdfmake-fonts.min.js",UA_PARSER:"lib/ua-parser/ua-parser.min.js",HASH:"lib/jshash/md5-min.js",DRAGGABILLY:"lib/draggabilly/draggabilly.pkgd",URL_POLYFILL:"lib/polyfill/url.js",PROMISE_POLYFILL:"lib/polyfill/promise/polyfill.min.js"};TC.Consts.classes={MAP:"tc-map",POINT:"tc-point",MARKER:"tc-marker",VISIBLE:"tc-visible",HIDDEN:"tc-hidden",COLLAPSED:"tc-collapsed",CHECKED:"tc-checked",DISABLED:"tc-disabled",ACTIVE:"tc-active",DEFAULT:"tc-default",LASTCHILD:"tc-lastchild",TRANSPARENT:"tc-transparent",DROP:"tc-drop",LOADING:"tc-loading",IPAD_IOS7_FIX:"tc-ipad-ios7-fix",INFO:"tc-msg-info",WARNING:"tc-msg-warning",ERROR:"tc-msg-error",THREED:"tc-3d"};TC.Consts.msgType={INFO:"info",WARNING:"warning",ERROR:"error"};TC.Consts.msgErrorMode={TOAST:"toast",CONSOLE:"console",EMAIL:"email"};TC.Consts.event={MAPLOAD:"mapload.tc",MAPREADY:"mapready.tc",MAPCHANGE:"mapchange.tc",BEFORELAYERADD:"beforelayeradd.tc",LAYERADD:"layeradd.tc",LAYERREMOVE:"layerremove.tc",LAYERORDER:"layerorder.tc",BEFORELAYERUPDATE:"beforelayerupdate.tc",LAYERUPDATE:"layerupdate.tc",LAYERERROR:"layererror.tc",BEFOREBASELAYERCHANGE:"beforebaselayerchange.tc",BASELAYERCHANGE:"baselayerchange.tc",BEFOREUPDATE:"beforeupdate.tc",UPDATE:"update.tc",BEFOREZOOM:"beforezoom.tc",ZOOM:"zoom.tc",BEFOREUPDATEPARAMS:"beforeupdateparams.tc",UPDATEPARAMS:"updateparams.tc",VECTORUPDATE:"vectorupdate.tc",FEATUREADD:"featureadd.tc",BEFOREFEATURESADD:"beforefeaturesadd.tc",FEATURESADD:"featuresadd.tc",FEATUREREMOVE:"featureremove.tc",FEATURESCLEAR:"featuresclear.tc",FEATURESIMPORT:"featuresimport.tc",FEATURESIMPORTERROR:"featuresimporterror.tc",FEATURESIMPORTPARTIAL:"featuresimportpartial.tc",BEFORETILELOAD:"beforetileload.tc",TILELOAD:"tileload.tc",TILELOADERROR:"tileloaderror.tc",CONTROLADD:"controladd.tc",CONTROLACTIVATE:"controlactivate.tc",CONTROLDEACTIVATE:"controldeactivate.tc",BEFORECONTROLRENDER:"beforecontrolrender.tc",CONTROLRENDER:"controlrender.tc",BEFORELAYOUTLOAD:"beforelayoutload.tc",LAYOUTLOAD:"layoutload.tc",LAYERVISIBILITY:"layervisibility.tc",LAYEROPACITY:"layeropacity.tc",FEATURECLICK:"featureclick.tc",NOFEATURECLICK:"nofeatureclick.tc",FEATUREOVER:"featureover.tc",FEATUREOUT:"featureout.tc",BEFOREFEATUREINFO:"beforefeatureinfo.tc",FEATUREINFO:"featureinfo.tc",NOFEATUREINFO:"nofeatureinfo.tc",FEATUREINFOERROR:"featureinfoerror.tc",CLICK:"click",MOUSEUP:"mouseup",MOUSEMOVE:"mousemove",MOUSELEAVE:"mouseleave",STARTLOADING:"startloading.tc",STOPLOADING:"stoploading.tc",EXTERNALSERVICEADDED:"externalserviceadded.tc",ZOOMTO:"zoomto.tc",PROJECTIONCHANGE:"projectionchange.tc",VIEWCHANGE:"viewchange.tc",TERRAINPROVIDERADD:"terrainprovideradd.tc",TERRAINPROVIDERREMOVE:"terrainproviderremove.tc",OVERVIEWBASELAYERCHANGE:"overviewbaselayerchange.tc",POPUP:"popup.tc",BEFOREAPPLYQUERY:"beforeapplyquery.tc"};TC.Consts.layer={IDENA_ORTHOPHOTO:"ortofoto",IDENA_BASEMAP:"mapabase",IDENA_CADASTER:"catastro",IDENA_CARTO:"cartografia",IDENA_ORTHOPHOTO2021:"ortofoto2021",IDENA_ORTHOPHOTO2020:"ortofoto2020",IDENA_ORTHOPHOTO2019:"ortofoto2019",IDENA_ORTHOPHOTO2018:"ortofoto2018",IDENA_ORTHOPHOTO2017:"ortofoto2017",IDENA_ORTHOPHOTO2014:"ortofoto2014",IDENA_ORTHOPHOTO2012:"ortofoto2012",IDENA_PAMPLONA_ORTHOPHOTO2020:"ortofoto_pamplona2020",IDENA_DYNBASEMAP:"mapabase_dinamico",IDENA_DYNORTHOPHOTO:"ortofoto_dinamico",IDENA_DYNORTHOPHOTO2021:"ortofoto2021_dinamico",IDENA_DYNORTHOPHOTO2020:"ortofoto2020_dinamico",IDENA_DYNORTHOPHOTO2019:"ortofoto2019_dinamico",IDENA_DYNORTHOPHOTO2018:"ortofoto2018_dinamico",IDENA_DYNORTHOPHOTO2017:"ortofoto2017_dinamico",IDENA_DYNORTHOPHOTO2014:"ortofoto2014_dinamico",IDENA_DYNORTHOPHOTO2012:"ortofoto2012_dinamico",IDENA_PAMPLONA_DYNORTHOPHOTO2020:"ortofoto_pamplona2020_dinamico",IDENA_DYNCARTO:"cartografia_dinamico",IDENA_BW_RELIEF:"relieve_bn",IDENA_BASEMAP_ORTHOPHOTO:"base_orto",IGN_ES_CARTO:"ign-raster",IGN_ES_BASEMAP:"ign-base",IGN_ES_BASEMAP_GREY:"ign-base-gris",IGN_ES_RELIEF:"ign-mtn",IGN_ES_ORTHOPHOTO:"ign-pnoa",IGN_ES_LIDAR:"ign-lidar",IGN_ES_DYNCARTO:"ign-raster-dyn",IGN_ES_DYNBASEMAP:"ign-base-dyn",IGN_ES_DYNBASEMAP_GREY:"ign-base-gris-dyn",IGN_ES_DYNRELIEF:"ign-mtn-dyn",IGN_ES_DYNORTHOPHOTO:"ign-pnoa-dyn",IGN_ES_DYNLIDAR:"ign-lidar-dyn",IGN_FR_CARTO:"ign-fr-cartes",IGN_FR_BASEMAP:"ign-fr-base",IGN_FR_RELIEF:"ign-fr-estompage",IGN_FR_ORTHOPHOTO:"ign-fr-orto",IGN_FR_DYNCARTO:"ign-fr-cartes-dyn",IGN_FR_DYNBASEMAP:"ign-fr-base-dyn",IGN_FR_DYNRELIEF:"ign-fr-estompage-dyn",IGN_FR_DYNORTHOPHOTO:"ign-fr-orto-dyn",OSM:"osm",CARTO_VOYAGER:"carto_voyager",CARTO_LIGHT:"carto_light",CARTO_DARK:"carto_dark",MAPBOX_STREETS:"mapbox_streets",MAPBOX_SATELLITE:"mapbox_satellite",BLANK:"ninguno"};TC.Consts.text={API_ERROR:"Error API SITNA",APP_ERROR:"Error de aplicaci\xf3n"};TC.Consts.layerType={WMS:"WMS",WMTS:"WMTS",WFS:"WFS",VECTOR:"vector",KML:"KML",GPX:"GPX",GML:"GML",GEOJSON:"GeoJSON",GROUP:"group"};TC.Consts.geom={POINT:"point",MULTIPOINT:"multipoint",POLYLINE:"polyline",POLYGON:"polygon",MULTIPOLYLINE:"multipolyline",MULTIPOLYGON:"multipolygon",CIRCLE:"circle",RECTANGLE:"rectangle"};TC.Consts.searchType={CADASTRAL:"cadastral",COORDINATES:"coordinates",MUNICIPALITY:"municipality",COUNCIL:"council",LOCALITY:"locality",STREET:"street",NUMBER:"number",URBAN:"urban",COMMONWEALTH:"commonwealth",ROAD:"road",ROADMILESTONE:"roadmilestone",PLACENAME:"placename",PLACENAMEMUNICIPALITY:"placenamemunicipality"};TC.Consts.mapSearchType={MUNICIPALITY:TC.Consts.searchType.MUNICIPALITY,COUNCIL:TC.Consts.searchType.COUNCIL,URBAN:TC.Consts.searchType.URBAN,COMMONWEALTH:TC.Consts.searchType.COMMONWEALTH,GENERIC:"generic"};TC.Consts.comparison={EQUAL_TO:"==",NOT_EQUAL_TO:"!=",LESS_THAN:"<",GREATER_THAN:">",LESS_THAN_EQUAL_TO:"=<",GREATER_THAN_EQUAL_TO:">=",LIKE:"is"};TC.Consts.logicalOperator={AND:"and",OR:"or"};TC.Consts.WMTSEncoding={KVP:"KVP",RESTFUL:"RESTful"};TC.Consts.mimeType={PNG:"image/png",JPEG:"image/jpeg",JSON:"application/json",GEOJSON:"application/vnd.geo+json",KML:"application/vnd.google-earth.kml+xml",KMZ:"application/vnd.google-earth.kmz",GML:"application/gml+xml",GPX:"application/gpx+xml",XML:"application/xml"};TC.Consts.format={JSON:"JSON",KML:"KML",KMZ:"KMZ",GML:"GML",GML2:"GML2",GML3:"GML3",GML32:"GML32",GEOJSON:"GeoJSON",TOPOJSON:"TopoJSON",GPX:"GPX",WKT:"WKT",SHP:"SHP",ZIP:"ZIP",GPKG:"GPKG"};TC.Consts.WFSErrors={GETFEATURE_NOT_AVAILABLE:"GetFeatureNotAvailable",LAYERS_NOT_AVAILABLE:"LayersNotAvailable",NO_LAYERS:"NoLayers",NO_VALID_LAYERS:"noValidLayers",QUERY_NOT_AVAILABLE:"QueryNotAvailable",MAX_NUM_FEATURES:"NumMaxFeatures",GETCAPABILITIES:"GetCapabilities",INDETERMINATE:"Indeterminate",NO_FEATURES:"NoFeatures"};TC.Consts.visibility={NOT_VISIBLE:0,NOT_VISIBLE_AT_RESOLUTION:1,HAS_VISIBLE:2,VISIBLE:4};TC.Consts.view={DEFAULT:0,THREED:1,PRINTING:2};TC.Consts.units={DEGREES:"degrees",METERS:"m"};TC.Consts.MARKER="marker";TC.Consts.infoContainer={POPUP:"popup",RESULTS_PANEL:"resultsPanel"};TC.Defaults=function(){var e={};return{imageRatio:1.05,proxy:"",crs:"EPSG:25830",utmCrs:"EPSG:25830",geoCrs:"EPSG:4326",initialExtent:[541084.221,4640788.225,685574.4632,4796618.764],maxExtent:!1,baselayerExtent:[480408,4599748,742552,4861892],resolutions:[1024,512,256,128,64,32,16,8,4,2,1,.5,.25],pointBoundsRadius:30,extentMargin:.2,mouseWheelZoom:!0,attribution:'<a href="http://sitna.navarra.es/" target="_blank">SITNA</a>',oldBrowserAlert:!0,notifyApplicationErrors:!1,loggingErrorsEnabled:!0,maxErrorCount:10,locale:"es-ES",view:TC.Consts.view.DEFAULT,screenSize:20,pixelTolerance:10,maxResolutionError:.01,toastDuration:5e3,averageTileSize:31e3,availableBaseLayers:[{id:TC.Consts.layer.IDENA_BASEMAP,title:"Mapa base",type:TC.Consts.layerType.WMTS,url:"//idena.navarra.es/ogc/wmts/",matrixSet:"epsg25830extended",layerNames:"mapabase",encoding:TC.Consts.WMTSEncoding.RESTFUL,format:"image/png",isDefault:!0,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-basemap.png",fallbackLayer:TC.Consts.layer.IDENA_DYNBASEMAP,overviewMapLayer:TC.Consts.layer.IDENA_BASEMAP},{id:TC.Consts.layer.IDENA_ORTHOPHOTO,title:"Ortofoto m\xe1xima actualidad",type:TC.Consts.layerType.WMTS,url:"//idena.navarra.es/ogc/wmts/",matrixSet:"epsg25830",layerNames:"ortofoto_maxima_actualidad",encoding:TC.Consts.WMTSEncoding.RESTFUL,format:"image/jpeg",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-orthophoto.jpg",fallbackLayer:TC.Consts.layer.IDENA_DYNORTHOPHOTO,overviewMapLayer:TC.Consts.layer.IDENA_BASEMAP},{id:TC.Consts.layer.IDENA_ORTHOPHOTO2021,title:"Ortofoto 2021",type:TC.Consts.layerType.WMTS,url:"//idena.navarra.es/ogc/wmts/",matrixSet:"epsg25830",layerNames:"ortofoto2021",encoding:TC.Consts.WMTSEncoding.RESTFUL,format:"image/jpeg",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-ortho2021.jpg",fallbackLayer:TC.Consts.layer.IDENA_DYNORTHOPHOTO2020,overviewMapLayer:TC.Consts.layer.IDENA_BASEMAP},{id:TC.Consts.layer.IDENA_ORTHOPHOTO2020,title:"Ortofoto 2020",type:TC.Consts.layerType.WMTS,url:"//idena.navarra.es/ogc/wmts/",matrixSet:"epsg25830",layerNames:"ortofoto2020",encoding:TC.Consts.WMTSEncoding.RESTFUL,format:"image/jpeg",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-ortho2020.jpg",fallbackLayer:TC.Consts.layer.IDENA_DYNORTHOPHOTO2020,overviewMapLayer:TC.Consts.layer.IDENA_BASEMAP},{id:TC.Consts.layer.IDENA_ORTHOPHOTO2019,title:"Ortofoto 2019",type:TC.Consts.layerType.WMTS,url:"//idena.navarra.es/ogc/wmts/",matrixSet:"epsg25830",layerNames:"ortofoto2019",encoding:TC.Consts.WMTSEncoding.RESTFUL,format:"image/jpeg",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-ortho2019.jpg",fallbackLayer:TC.Consts.layer.IDENA_DYNORTHOPHOTO2019,overviewMapLayer:TC.Consts.layer.IDENA_BASEMAP},{id:TC.Consts.layer.IDENA_ORTHOPHOTO2018,title:"Ortofoto 2018",type:TC.Consts.layerType.WMTS,url:"//idena.navarra.es/ogc/wmts/",matrixSet:"epsg25830",layerNames:"ortofoto2018",encoding:TC.Consts.WMTSEncoding.RESTFUL,format:"image/jpeg",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-ortho2018.jpg",fallbackLayer:TC.Consts.layer.IDENA_DYNORTHOPHOTO2018,overviewMapLayer:TC.Consts.layer.IDENA_BASEMAP},{id:TC.Consts.layer.IDENA_ORTHOPHOTO2017,title:"Ortofoto 2017",type:TC.Consts.layerType.WMTS,url:"//idena.navarra.es/ogc/wmts/",matrixSet:"epsg25830",layerNames:"ortofoto2017",encoding:TC.Consts.WMTSEncoding.RESTFUL,format:"image/jpeg",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-ortho2017.jpg",fallbackLayer:TC.Consts.layer.IDENA_DYNORTHOPHOTO2017,overviewMapLayer:TC.Consts.layer.IDENA_BASEMAP},{id:TC.Consts.layer.IDENA_ORTHOPHOTO2014,title:"Ortofoto 2014",type:TC.Consts.layerType.WMTS,url:"//idena.navarra.es/ogc/wmts/",matrixSet:"epsg25830reduced",layerNames:"ortofoto2014",encoding:TC.Consts.WMTSEncoding.RESTFUL,format:"image/jpeg",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-ortho2014.jpg",fallbackLayer:TC.Consts.layer.IDENA_DYNORTHOPHOTO2014,overviewMapLayer:TC.Consts.layer.IDENA_BASEMAP},{id:TC.Consts.layer.IDENA_ORTHOPHOTO2012,title:"Ortofoto 2012",type:TC.Consts.layerType.WMTS,url:"//idena.navarra.es/ogc/wmts/",matrixSet:"epsg25830",layerNames:"ortofoto2012",encoding:TC.Consts.WMTSEncoding.RESTFUL,format:"image/jpeg",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-ortho2012.jpg",fallbackLayer:TC.Consts.layer.IDENA_DYNORTHOPHOTO2012,overviewMapLayer:TC.Consts.layer.IDENA_BASEMAP},{id:TC.Consts.layer.IDENA_PAMPLONA_ORTHOPHOTO2020,title:"Ortofoto comarca de Pamplona 2020",type:TC.Consts.layerType.WMTS,url:"//idena.navarra.es/ogc/wmts/",matrixSet:"epsg25830deep",layerNames:"ortofotoPamplona2020",encoding:TC.Consts.WMTSEncoding.RESTFUL,format:"image/jpeg",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-ortho-pamplona2020.jpg",fallbackLayer:TC.Consts.layer.IDENA_PAMPLONA_DYNORTHOPHOTO2020,overviewMapLayer:TC.Consts.layer.IDENA_BASEMAP},{id:TC.Consts.layer.IDENA_CARTO,title:"Cartograf\xeda topogr\xe1fica 2017",type:TC.Consts.layerType.WMTS,url:"//idena.navarra.es/ogc/wmts/",matrixSet:"epsg25830",layerNames:"mapaTopografico",encoding:TC.Consts.WMTSEncoding.RESTFUL,format:"image/png",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-bta.png",fallbackLayer:TC.Consts.layer.IDENA_DYNCARTO,overviewMapLayer:TC.Consts.layer.IDENA_BASEMAP},{id:TC.Consts.layer.IDENA_CADASTER,title:"Catastro",type:TC.Consts.layerType.WMS,url:"//idena.navarra.es/ogc/wms",layerNames:"catastro,regionesFronterizas",format:"image/png",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-cadaster.png",overviewMapLayer:TC.Consts.layer.IDENA_BASEMAP},{id:TC.Consts.layer.IDENA_BW_RELIEF,title:"Relieve",type:TC.Consts.layerType.WMS,url:"//idena.navarra.es/ogc/wms",layerNames:"IDENA:mapa_relieve_bn",format:"image/jpeg",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-relief_bw.jpg",overviewMapLayer:TC.Consts.layer.IDENA_BASEMAP},{id:TC.Consts.layer.IDENA_BASEMAP_ORTHOPHOTO,title:"Mapa base/ortofoto",type:TC.Consts.layerType.WMS,url:"//idena.navarra.es/ogc/wms",layerNames:"mapaBase_orto",format:"image/jpeg",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-base_ortho.png",overviewMapLayer:TC.Consts.layer.IDENA_BASEMAP},{id:TC.Consts.layer.IDENA_DYNBASEMAP,title:"Mapa base",type:TC.Consts.layerType.WMS,url:"//idena.navarra.es/ogc/wms",layerNames:"mapaBase,regionesFronterizas",format:"image/jpeg",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-basemap.png",overviewMapLayer:TC.Consts.layer.IDENA_DYNBASEMAP},{id:TC.Consts.layer.IDENA_DYNORTHOPHOTO,title:"Ortofoto m\xe1xima actualidad",type:TC.Consts.layerType.WMS,url:"//idena.navarra.es/ogc/wms",layerNames:"ortofoto_maxima_actualidad",format:"image/jpeg",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-orthophoto.jpg",overviewMapLayer:TC.Consts.layer.IDENA_DYNBASEMAP},{id:TC.Consts.layer.IDENA_DYNORTHOPHOTO2021,title:"Ortofoto 2021",type:TC.Consts.layerType.WMS,url:"//idena.navarra.es/ogc/wms",layerNames:"ortofoto_5000_2021",format:"image/jpeg",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-ortho2021.jpg",overviewMapLayer:TC.Consts.layer.IDENA_DYNBASEMAP},{id:TC.Consts.layer.IDENA_DYNORTHOPHOTO2020,title:"Ortofoto 2020",type:TC.Consts.layerType.WMS,url:"//idena.navarra.es/ogc/wms",layerNames:"ortofoto_5000_2020",format:"image/jpeg",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-ortho2020.jpg",overviewMapLayer:TC.Consts.layer.IDENA_DYNBASEMAP},{id:TC.Consts.layer.IDENA_DYNORTHOPHOTO2019,title:"Ortofoto 2019",type:TC.Consts.layerType.WMS,url:"//idena.navarra.es/ogc/wms",layerNames:"ortofoto_5000_2019",format:"image/jpeg",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-ortho2019.jpg",overviewMapLayer:TC.Consts.layer.IDENA_DYNBASEMAP},{id:TC.Consts.layer.IDENA_DYNORTHOPHOTO2018,title:"Ortofoto 2018",type:TC.Consts.layerType.WMS,url:"//idena.navarra.es/ogc/wms",layerNames:"ortofoto_5000_2018",format:"image/jpeg",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-ortho2018.jpg",overviewMapLayer:TC.Consts.layer.IDENA_DYNBASEMAP},{id:TC.Consts.layer.IDENA_DYNORTHOPHOTO2017,title:"Ortofoto 2017",type:TC.Consts.layerType.WMS,url:"//idena.navarra.es/ogc/wms",layerNames:"ortofoto_5000_2017",format:"image/jpeg",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-ortho2017.jpg",overviewMapLayer:TC.Consts.layer.IDENA_DYNBASEMAP},{id:TC.Consts.layer.IDENA_DYNORTHOPHOTO2014,title:"Ortofoto 2014",type:TC.Consts.layerType.WMS,url:"//idena.navarra.es/ogc/wms",layerNames:"ortofoto_5000_2014",format:"image/jpeg",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-ortho2014.jpg",overviewMapLayer:TC.Consts.layer.IDENA_DYNBASEMAP},{id:TC.Consts.layer.IDENA_DYNORTHOPHOTO2012,title:"Ortofoto 2012",type:TC.Consts.layerType.WMS,url:"//idena.navarra.es/ogc/wms",layerNames:"ortofoto_5000_2012",format:"image/jpeg",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-ortho2012.jpg",overviewMapLayer:TC.Consts.layer.IDENA_DYNBASEMAP},{id:TC.Consts.layer.IDENA_PAMPLONA_DYNORTHOPHOTO2020,title:"Ortofoto comarca de Pamplona 2020",type:TC.Consts.layerType.WMS,url:"//idena.navarra.es/ogc/wms",layerNames:"ortofoto_500_Pamplona_2020",format:"image/jpeg",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-ortho-pamplona2020.jpg",overviewMapLayer:TC.Consts.layer.IDENA_DYNBASEMAP},{id:TC.Consts.layer.IDENA_DYNCARTO,title:"Cartograf\xeda topogr\xe1fica 2017",type:TC.Consts.layerType.WMS,url:"//idena.navarra.es/ogc/wms",layerNames:"MTNa5_BTA",format:"image/png",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-bta.png",overviewMapLayer:TC.Consts.layer.IDENA_DYNBASEMAP},{id:TC.Consts.layer.IGN_ES_CARTO,type:TC.Consts.layerType.WMTS,title:"Cartograf\xeda raster \r\n (IGN ES)",url:"//www.ign.es/wmts/mapa-raster",encoding:TC.Consts.WMTSEncoding.KVP,layerNames:"MTN",matrixSet:"EPSG:25830",format:"image/jpeg",thumbnail:TC.apiLocation+"tc/css/img/thumb-carto_ign.png",fallbackLayer:TC.Consts.layer.IGN_ES_DYNCARTO,overviewMapLayer:TC.Consts.layer.IGN_ES_BASEMAP},{id:TC.Consts.layer.IGN_ES_BASEMAP,title:"Callejero \r\n (IGN ES)",type:TC.Consts.layerType.WMTS,url:"//www.ign.es/wmts/ign-base",encoding:TC.Consts.WMTSEncoding.KVP,layerNames:"IGNBaseTodo",matrixSet:"EPSG:25830",format:"image/jpeg",thumbnail:TC.apiLocation+"tc/css/img/thumb-basemap_ign.png",fallbackLayer:TC.Consts.layer.IGN_ES_DYNBASEMAP,overviewMapLayer:TC.Consts.layer.IGN_ES_BASEMAP},{id:TC.Consts.layer.IGN_ES_BASEMAP_GREY,title:"Callejero gris \r\n (IGN ES)",type:TC.Consts.layerType.WMTS,url:"//www.ign.es/wmts/ign-base",encoding:TC.Consts.WMTSEncoding.KVP,layerNames:"IGNBase-gris",matrixSet:"GoogleMapsCompatible",format:"image/jpeg",thumbnail:TC.apiLocation+"tc/css/img/thumb-basemap_grey_ign.png",fallbackLayer:TC.Consts.layer.IGN_ES_DYNBASEMAP_GREY,overviewMapLayer:TC.Consts.layer.IGN_ES_BASEMAP},{id:TC.Consts.layer.IGN_ES_RELIEF,title:"Relieve \r\n (IGN ES)",type:TC.Consts.layerType.WMTS,url:"//servicios.idee.es/wmts/mdt",encoding:TC.Consts.WMTSEncoding.KVP,layerNames:"Relieve",matrixSet:"EPSG:25830",format:"image/jpeg",thumbnail:TC.apiLocation+"tc/css/img/thumb-relief_ign.jpg",fallbackLayer:TC.Consts.layer.IGN_ES_DYNRELIEF,overviewMapLayer:TC.Consts.layer.IGN_ES_BASEMAP},{id:TC.Consts.layer.IGN_ES_ORTHOPHOTO,title:"Ortofoto PNOA",type:TC.Consts.layerType.WMTS,url:"//www.ign.es/wmts/pnoa-ma",encoding:TC.Consts.WMTSEncoding.KVP,layerNames:"OI.OrthoimageCoverage",matrixSet:"EPSG:25830",format:"image/jpeg",thumbnail:TC.apiLocation+"tc/css/img/thumb-orthophoto_pnoa.jpg",fallbackLayer:TC.Consts.layer.IGN_ES_DYNORTHOPHOTO,overviewMapLayer:TC.Consts.layer.IGN_ES_BASEMAP},{id:TC.Consts.layer.IGN_ES_LIDAR,title:"Modelo digital LIDAR (IGN ES)",type:TC.Consts.layerType.WMTS,url:"//wmts-mapa-lidar.idee.es/lidar",encoding:TC.Consts.WMTSEncoding.KVP,layerNames:"EL.GridCoverageDSM",matrixSet:"GoogleMapsCompatible",format:"image/png",thumbnail:TC.apiLocation+"tc/css/img/thumb-lidar_ign.jpg",fallbackLayer:TC.Consts.layer.IGN_ES_DYNLIDAR,overviewMapLayer:TC.Consts.layer.IGN_ES_BASEMAP},{id:TC.Consts.layer.IGN_ES_DYNBASEMAP,title:"Callejero \r\n (IGN ES)",type:TC.Consts.layerType.WMS,url:"//www.ign.es/wms-inspire/ign-base",layerNames:"IGNBaseTodo",thumbnail:TC.apiLocation+"TC/css/img/thumb-basemap_ign.png",overviewMapLayer:TC.Consts.layer.IGN_ES_BASEMAP},{id:TC.Consts.layer.IGN_ES_DYNBASEMAP_GREY,title:"Callejero gris \r\n (IGN ES)",type:TC.Consts.layerType.WMS,url:"//www.ign.es/wms-inspire/ign-base",layerNames:"IGNBaseTodo-gris",thumbnail:TC.apiLocation+"TC/css/img/thumb-basemap_grey_ign.png",overviewMapLayer:TC.Consts.layer.IGN_ES_BASEMAP},{id:TC.Consts.layer.IGN_ES_DYNORTHOPHOTO,title:"Ortofoto PNOA",type:TC.Consts.layerType.WMS,url:"//www.ign.es/wms-inspire/pnoa-ma",layerNames:"OI.OrthoimageCoverage",thumbnail:TC.apiLocation+"TC/css/img/thumb-orthophoto_pnoa.jpg",overviewMapLayer:TC.Consts.layer.IGN_ES_BASEMAP},{id:TC.Consts.layer.IGN_ES_DYNCARTO,title:"Cartograf\xeda raster \r\n (IGN ES)",type:TC.Consts.layerType.WMS,url:"//www.ign.es/wms-inspire/mapa-raster",layerNames:"mtn_rasterizado",thumbnail:TC.apiLocation+"TC/css/img/thumb-carto_ign.png",overviewMapLayer:TC.Consts.layer.IGN_ES_BASEMAP},{id:TC.Consts.layer.IGN_ES_DYNRELIEF,title:"Relieve \r\n (IGN ES)",type:TC.Consts.layerType.WMS,url:"//servicios.idee.es/wms-inspire/mdt",layerNames:"EL.GridCoverage",thumbnail:TC.apiLocation+"TC/css/img/thumb-relief_ign.jpg",overviewMapLayer:TC.Consts.layer.IGN_ES_BASEMAP},{id:TC.Consts.layer.IGN_ES_DYNLIDAR,title:"Modelo digital LIDAR (IGN ES)",type:TC.Consts.layerType.WMS,url:"//wms-mapa-lidar.idee.es/lidar",layerNames:"EL.GridCoverage",thumbnail:TC.apiLocation+"tc/css/img/thumb-lidar_ign.jpg",overviewMapLayer:TC.Consts.layer.IGN_ES_BASEMAP},{id:TC.Consts.layer.IGN_FR_CARTO,title:"Cartograf\xeda raster \r\n (IGN FR)",type:TC.Consts.layerType.WMTS,url:"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/geoportail/wmts",encoding:TC.Consts.WMTSEncoding.KVP,layerNames:"GEOGRAPHICALGRIDSYSTEMS.MAPS",matrixSet:"PM",format:"image/jpeg",thumbnail:TC.apiLocation+"tc/css/img/thumb-carto-fr-ign.png",fallbackLayer:TC.Consts.layer.IGN_FR_DYNCARTO,ignoreProxification:!0,overviewMapLayer:TC.Consts.layer.IGN_FR_BASEMAP},{id:TC.Consts.layer.IGN_FR_BASEMAP,title:"Mapa base \r\n (IGN FR)",type:TC.Consts.layerType.WMTS,url:"//wxs.ign.fr/essentiels/geoportail/wmts",encoding:TC.Consts.WMTSEncoding.KVP,layerNames:"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2",matrixSet:"PM",format:"image/png",thumbnail:TC.apiLocation+"tc/css/img/thumb-base-fr-ign.png",fallbackLayer:TC.Consts.layer.IGN_FR_DYNBASEMAP,ignoreProxification:!0,overviewMapLayer:TC.Consts.layer.IGN_FR_BASEMAP},{id:TC.Consts.layer.IGN_FR_RELIEF,title:"Relieve \r\n (IGN FR)",type:TC.Consts.layerType.WMTS,url:"//wxs.ign.fr/altimetrie/geoportail/wmts",encoding:TC.Consts.WMTSEncoding.KVP,layerNames:"ELEVATION.ELEVATIONGRIDCOVERAGE.SHADOW",matrixSet:"PM",format:"image/png",thumbnail:TC.apiLocation+"tc/css/img/thumb-estom-fr-ign.jpg",fallbackLayer:TC.Consts.layer.IGN_FR_DYNRELIEF,ignoreProxification:!0,overviewMapLayer:TC.Consts.layer.IGN_FR_BASEMAP},{id:TC.Consts.layer.IGN_FR_ORTHOPHOTO,title:"Ortofoto \r\n (IGN FR)",type:TC.Consts.layerType.WMTS,url:"//wxs.ign.fr/essentiels/geoportail/wmts",encoding:TC.Consts.WMTSEncoding.KVP,layerNames:"ORTHOIMAGERY.ORTHOPHOTOS",matrixSet:"PM",format:"image/jpeg",thumbnail:TC.apiLocation+"tc/css/img/thumb-ortho-fr-ign.jpg",fallbackLayer:TC.Consts.layer.IGN_FR_DYNORTHOPHOTO,ignoreProxification:!0,overviewMapLayer:TC.Consts.layer.IGN_FR_BASEMAP},{id:TC.Consts.layer.IGN_FR_DYNCARTO,title:"Cartograf\xeda raster \r\n (IGN FR)",type:TC.Consts.layerType.WMS,url:"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/geoportail/r/wms",layerNames:"GEOGRAPHICALGRIDSYSTEMS.MAPS",thumbnail:TC.apiLocation+"tc/css/img/thumb-carto-fr-ign.png",ignoreProxification:!0,overviewMapLayer:TC.Consts.layer.IGN_FR_BASEMAP},{id:TC.Consts.layer.IGN_FR_DYNBASEMAP,title:"Mapa base \r\n (IGN FR)",type:TC.Consts.layerType.WMS,url:"//wxs.ign.fr/essentiels/geoportail/r/wms",layerNames:"GEOGRAPHICALGRIDSYSTEMS.PLANIGN",thumbnail:TC.apiLocation+"tc/css/img/thumb-base-fr-ign.png",ignoreProxification:!0,overviewMapLayer:TC.Consts.layer.IGN_FR_BASEMAP},{id:TC.Consts.layer.IGN_FR_DYNRELIEF,title:"Relieve \r\n (IGN FR)",type:TC.Consts.layerType.WMS,url:"//wxs.ign.fr/altimetrie/geoportail/r/wms",layerNames:"ELEVATION.ELEVATIONGRIDCOVERAGE.SHADOW",thumbnail:TC.apiLocation+"tc/css/img/thumb-estom-fr-ign.jpg",ignoreProxification:!0,overviewMapLayer:TC.Consts.layer.IGN_FR_BASEMAP},{id:TC.Consts.layer.IGN_FR_DYNORTHOPHOTO,title:"Ortofoto \r\n (IGN FR)",type:TC.Consts.layerType.WMS,url:"//wxs.ign.fr/essentiels/geoportail/r/wms",layerNames:"ORTHOIMAGERY.ORTHOPHOTOS",thumbnail:TC.apiLocation+"tc/css/img/thumb-ortho-fr-ign.jpg",ignoreProxification:!0,overviewMapLayer:TC.Consts.layer.IGN_FR_BASEMAP},{id:TC.Consts.layer.OSM,title:"OSM",type:TC.Consts.layerType.WMTS,url:TC.apiLocation+"wmts/osm/",matrixSet:"WorldWebMercatorQuad",layerNames:"osm",encoding:TC.Consts.WMTSEncoding.RESTFUL,format:"image/png",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-osm.png",overviewMapLayer:TC.Consts.layer.OSM},{id:TC.Consts.layer.CARTO_VOYAGER,title:"CARTO Voyager",type:TC.Consts.layerType.WMTS,url:TC.apiLocation+"wmts/carto/",matrixSet:"WorldWebMercatorQuad",layerNames:"voyager",encoding:TC.Consts.WMTSEncoding.RESTFUL,format:"image/png",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-carto-voyager.png",overviewMapLayer:TC.Consts.layer.CARTO_VOYAGER},{id:TC.Consts.layer.CARTO_LIGHT,title:"CARTO light",type:TC.Consts.layerType.WMTS,url:TC.apiLocation+"wmts/carto/",matrixSet:"WorldWebMercatorQuad",layerNames:"light_all",encoding:TC.Consts.WMTSEncoding.RESTFUL,format:"image/png",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-carto-light.png",overviewMapLayer:TC.Consts.layer.CARTO_VOYAGER},{id:TC.Consts.layer.CARTO_DARK,title:"CARTO dark",type:TC.Consts.layerType.WMTS,url:TC.apiLocation+"wmts/carto/",matrixSet:"WorldWebMercatorQuad",layerNames:"dark_all",encoding:TC.Consts.WMTSEncoding.RESTFUL,format:"image/png",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-carto-dark.png",overviewMapLayer:TC.Consts.layer.CARTO_VOYAGER},{id:TC.Consts.layer.MAPBOX_STREETS,title:"Mapbox Streets",type:TC.Consts.layerType.WMTS,url:TC.apiLocation+"wmts/mapbox/",matrixSet:"WorldWebMercatorQuad",layerNames:"streets",encoding:TC.Consts.WMTSEncoding.RESTFUL,format:"image/png",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-mapbox-streets.png",overviewMapLayer:TC.Consts.layer.MAPBOX_STREETS},{id:TC.Consts.layer.MAPBOX_SATELLITE,title:"Mapbox Satellite",type:TC.Consts.layerType.WMTS,url:TC.apiLocation+"wmts/mapbox/",matrixSet:"WorldWebMercatorQuad",layerNames:"satellite",encoding:TC.Consts.WMTSEncoding.RESTFUL,format:"image/jpeg",isDefault:!1,hideTree:!0,thumbnail:TC.apiLocation+"TC/css/img/thumb-mapbox-satellite.jpg",overviewMapLayer:TC.Consts.layer.MAPBOX_STREETS},{id:TC.Consts.layer.BLANK,title:"Mapa en blanco",type:TC.Consts.layerType.VECTOR}],baseLayers:[TC.Consts.layer.IDENA_BASEMAP,TC.Consts.layer.IDENA_ORTHOPHOTO,TC.Consts.layer.IDENA_CADASTER,TC.Consts.layer.IDENA_CARTO],defaultBaseLayer:TC.Consts.layer.IDENA_BASEMAP,workLayers:[],controls:{loadingIndicator:!0,navBar:!1,scaleBar:!1,scale:!1,scaleSelector:!1,overviewMap:!1,basemapSelector:!1,attribution:!0,TOC:!1,workLayerManager:!1,layerCatalog:!1,coordinates:!0,legend:!1,popup:!1,search:{url:"https://idena.navarra.es/ogc/wfs",allowedSearchTypes:{coordinates:{},municipality:{},urban:{},street:{},number:{},cadastral:{}}},measure:!1,streetView:!1,click:!1,printMap:!1,featureInfo:{active:!0,persistentHighlights:!0},featureTools:!0},layout:null,styles:{point:{fillColor:"#000000",fillOpacity:.1,strokeColor:"#ff0000",strokeWidth:2,strokeOpacity:1,radius:6,labelOutlineWidth:2,labelOutlineColor:"#ffffff",labelOffset:[0,-16],fontColor:"#000000",fontSize:10},marker:{classes:[TC.Consts.classes.MARKER+1,TC.Consts.classes.MARKER+2,TC.Consts.classes.MARKER+3,TC.Consts.classes.MARKER+4,TC.Consts.classes.MARKER+5],anchor:[.5,1],width:32,height:32,labelOutlineWidth:2,labelOutlineColor:"#ffffff",labelOffset:[0,-32],fontColor:"#000000",fontSize:10},line:{strokeColor:"#ff0000",strokeWidth:2,strokeOpacity:1,labelOutlineWidth:2,labelOutlineColor:"#ffffff",fontColor:"#000000",fontSize:10},polygon:{strokeColor:"#ff0000",strokeWidth:2,strokeOpacity:1,fillColor:"#000000",fillOpacity:.3,labelOutlineWidth:2,labelOutlineColor:"#ffffff",fontColor:"#000000",fontSize:10},cluster:{point:{fillColor:"#333366",fillOpacity:.6,radius:function(t){var a=t.features.length,o=e[a];if(!o){o=2+Math.round(5*Math.sqrt(a));e[a]=o}return o},label:"${features.length}",fontColor:"#ffffff",fontSize:9}},selection:{point:{fillColor:"#008000",fillOpacity:.5,strokeColor:"#008000",strokeWidth:2,radius:6,labelOutlineWidth:2,labelOutlineColor:"#ffffff",labelOffset:[0,-16],fontColor:"#000000",fontSize:10},line:{strokeColor:"#008000",strokeWidth:2,labelOutlineWidth:2,labelOutlineColor:"#ffffff",fontColor:"#000000",fontSize:10},polygon:{strokeColor:"#008000",strokeWidth:2,fillColor:"#000000",fillOpacity:.3,labelOutlineWidth:2,labelOutlineColor:"#ffffff",fontColor:"#000000",fontSize:10}}}}}();!function(){Array.prototype.map||(Array.prototype.map=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),a=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var o=new Array(a),r=arguments.length>=2?arguments[1]:void 0,n=0;n<a;n++)n in t&&(o[n]=e.call(r,t[n],n,t));return o});TC.proxify=function(e){var t=e=e.trim();if(TC.Cfg.proxy){var a=!1;if(TC.Cfg.proxyExceptions)for(var o=0;o<TC.Cfg.proxyExceptions.length;o++)if(e.indexOf(TC.Cfg.proxyExceptions[o])>-1){a=!0;break}if(!a&&!TC.Util.isSameOrigin(e))if("function"==typeof TC.Cfg.proxy)t=TC.Cfg.proxy(e);else{t=TC.Cfg.proxy;"http"!=e.substr(0,4)&&(t+=window.location.protocol);t+=encodeURIComponent(e)}}return t};"boolean"!=typeof TC.isDebug&&(TC.isDebug=!1);var e=function(e){let t="";try{throw new Error}catch(e){t=e&&e.stack?e.stack:e.toString()}const a=TC.Map.get(document.querySelector("."+TC.Consts.classes.MAP)),o="Error al cargar "+e,r=TC.Util.getLocaleString(a.options.locale,"urlFailedToLoad",{url:e});TC.error(r,[TC.Consts.msgErrorMode.TOAST],o);TC.error(r+". Pila de la llamada al recurso:                 "+(t&&t.length>0?t:""),[TC.Consts.msgErrorMode.EMAIL],o)};TC.syncLoadJS=function(t){var a=function(e,t){var a,o=new XMLHttpRequest;o.open("GET",e,!1);o.onreadystatechange=function(e){if(4===o.readyState)if(404===o.status){a=!1;t(!0)}else if(200!==o.status){t();a=!1}else a=o.responseText};try{o.send(null)}catch(e){a=!1;t()}return a};/(\.js|\/)$/i.test(t)||(t+=TC.isDebug?".js":".min.js");var o=a(t,function(o){if(o){e(t);return!1}return a(t,function(){e(t)})});if(o){var r=document.createElement("script");r.type="text/javascript";r.text=o;(function(){var e,t=document,a=t.getElementsByTagName("head");if(0===a.length){e=t.createElement("head");t.documentElement.insertBefore(e,document.body)}else e=a[0];return e})().appendChild(r)}};const t=["","-webkit-","-moz-","-o-","-ms-"];var a,o,r;TC.browserFeatures={touch:function(){if(void 0===a){if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch){a=!0;return!0}const e=t.map(function(e){return"("+e+"touch-enabled)"}).join();a=matchMedia(e).matches}return a},inputTypeColor:function(){if(void 0===o){const e=document.createElement("input");e.setAttribute("type","color");if(o="text"!==e.type&&"style"in e){e.value=":-)";o=":-)"!==e.value}}return o},urlParser:function(){if(void 0===r)try{const e=new URL("http://sitna.tracasa.es/");r="http://sitna.tracasa.es/"===e.href}catch(e){r=!1}return r}};if(window.jQuery){TC._jQueryIsLoaded=!0;!function(){$._oldWhen=$.when;$.when=function(){const e=new Array(arguments.length);for(var t=0;t<arguments.length;t++){const a=e[t]=arguments[t];if(a instanceof Promise){const o=$.Deferred();a.then(function(e){o.resolve(e)}).catch(function(e){o.reject(e)});e[t]=o}}return $._oldWhen.apply(this,e)}}()}"Promise"in window||TC.syncLoadJS(TC.apiLocation+TC.Consts.url.PROMISE_POLYFILL);window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);"finally"in Promise.prototype||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then(function(a){return t.resolve(e()).then(function(){return a})},function(a){return t.resolve(e()).then(function(){throw a})})});TC.tool&&TC.tool.Proxification||TC.syncLoadJS(TC.apiLocation+"TC/tool/Proxification");TC.ajax=function(e){return new Promise(function(t,a){const o=(e=e||{}).method||"GET",r="GET"===o;var n;if(e.data)if("string"==typeof e.data)n=e.data;else if("object"==typeof e.data)if(r&&(e.contentType||"boolean"==typeof e.contentType))n=TC.Util.getParamString(e.data);else{const t=[];for(var s in e.data)t.push(s+"="+e.data[s].toString());n=t.join("&")}var i=e.url;r&&n&&(i=i+"?"+n);!1===e.cache&&(i+=(i.indexOf("?")<0?"?":"&")+"ts="+Date.now());const l=new XMLHttpRequest;l.open(o,i);e.contentType||"boolean"==typeof e.contentType?e.contentType&&l.setRequestHeader("Content-Type",e.contentType+"; charset=UTF-8"):l.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");l.onreadystatechange=function(o){if(4===l.readyState)if(200!==l.status)a({status:l.status,msg:l.statusText,url:e.url});else{var r;try{switch(e.responseType){case TC.Consts.mimeType.JSON:if(l.responseXML)throw l.responseXML;r=JSON.parse(l.responseText);break;case TC.Consts.mimeType.XML:r=(new DOMParser).parseFromString(l.responseText,"application/xml");break;default:r=l.responseText}t({data:r,contentType:l.getResponseHeader("Content-type")})}catch(e){a(e)}}};try{l.send("POST"===o?n:null)}catch(e){a(e)}})};TC.loadJSInOrder=function(e,t,a){TC.loadJS(e,t,a,!0)};const n=function(e,t){TC.Util.isSameOrigin(e)||(t.crossOrigin="anonymous")};TC.loadJS=function(t,a,o,r,s){arguments.length<4&&(r=!1);var i=Array.isArray(a)?a:[a];i=i.map(function(e){return/\.js$/i.test(e)||0!==e.indexOf(TC.apiLocation)?e:e+(TC.isDebug?".js":".min.js")});if(t){i=i instanceof Array?i:[i];var l="";const t=function(e){return e.split("/").reverse().slice(0,2).reverse().join("_").toLowerCase()};if(i.length>1){var T=i.slice(0).filter(function(e,a){if(loadjs.isDefined(t(e))){i.splice(a,1);loadjs.ready(t(e),o);return!1}return!0});1===T.length?l=t(T[0]):T.length>0&&(l=T.reduce(function(e,a){return t(e)+"_"+t(a)}))}else l=t(i[0]);if(l.length>0)if(loadjs.isDefined(l)){i.forEach(function(e){const t=new URL(e,location.href),a=Array.from(document.scripts).filter(e=>e.src===t.href)[0];a&&document.head.appendChild(a.cloneNode())});loadjs.ready(l,o)}else{var C={async:!r,numRetries:1};s||TC.Util.detectIE()||(C.before=n);loadjs(i,l,C);loadjs.ready(l,{success:function(){o()},error:function(t){e(t)}})}}else o()};TC.loadCSS=function(t){const a=t.split("/").reverse().slice(0,2).reverse().join("_").toLowerCase();loadjs.isDefined(a)?loadjs.ready(a,{}):loadjs(t,a,{error:function(t){e(t)},numRetries:1})};var s={};TC.getProjectionData=function(e){const t=((e=e||{}).crs||"").match(/\d{4,5}$/g);let a=t?t[0]:"";const o=TC.Consts.url.EPSG+"?format=json&q="+a;let r=s[a];if(r)return e.sync?r:Promise.resolve(r);if(e.sync){let e;const t=new XMLHttpRequest;t.onreadystatechange=function(a){4==t.readyState&&(e=404!=t.status&&(200==t.status&&t.responseText))};t.open("GET",o,!1);try{t.send(null)}catch(t){e=!1}e&&(e=JSON.parse(e));return e}return new Promise(function(t,r){new TC.tool.Proxification(TC.proxify).fetchJSON(o,e).then(function(e){s[a]=e;t(e)}).catch(function(e){r(Error(e))})})};TC.loadProjDef=function(e){const t=(e=e||{}).crs;var a;window[TC.Consts.PROJ4JSOBJ]||TC.syncLoadJS(TC.url.proj4js);a=function(e){e=function(e){var t=/http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/\d\/(\d{4,5})/.exec(e);return t&&2===t.length?"urn:ogc:def:crs:EPSG::"+t[1]:e}(e);return proj4.defs(e)};const o=function(e,t){proj4.defs(e,t);window.ol&&window.ol.proj&&window.ol.proj.proj4.register(proj4)},r=function(e){return"function"==typeof e},n=function(e,r,n){const s="EPSG:"+e,i="urn:ogc:def:crs:EPSG::"+e,l="urn:x-ogc:def:crs:EPSG:"+e,T="http://www.opengis.net/gml/srs/epsg.xml#"+e,C="http://www.opengis.net/def/crs/EPSG/0/"+e;var c;if("object"==typeof r){c=TC.Util.extend({},r);r=TC.Util.extend({},r);c.axis&&delete c.axis}else"string"==typeof r&&(c=r.replace("+axis=neu",""));o(s,r);o(i,r);o(l,r);o(T,c);o(C,r);if(0===t.indexOf("http://www.opengis.net/gml/srs/epsg.xml#")){o(t,c);a(t).name=n}a(s).name=n;a(T).name=n;a(C).name=n};var s=t.lastIndexOf("#");s<0&&(s=t.lastIndexOf("/"));s<0&&(s=t.lastIndexOf(":"));var i=t.substr(s+1),l=a(t);if(l){n(i,l,e.name);r(e.callback)&&e.callback()}else if(e.def){n(i,e.def,e.name);r(e.callback)&&e.callback()}else{const t=function(t){(function(e){const t=e&&"ok"===e.status&&1===e.number_result;if(t){var a=e.results[0];n(a.code,a.proj4,a.name)}return t})(t)&&r(e.callback)&&e.callback()};if(e.sync){t(TC.getProjectionData(e))}else TC.getProjectionData(e).then(t)}};TC.url={templatingRuntime:[TC.apiLocation+TC.Consts.url.TEMPLATING_RUNTIME,TC.apiLocation+TC.Consts.url.TEMPLATING_HELPERS],templatingFull:[TC.apiLocation+TC.Consts.url.TEMPLATING_FULL,TC.apiLocation+TC.Consts.url.TEMPLATING_HELPERS]};TC.url.ol=TC.apiLocation+TC.Consts.url.OL;TC.url.olConnector=TC.apiLocation+TC.Consts.url.OL_CONNECTOR;TC.url.proj4js=TC.apiLocation+TC.Consts.url.PROJ4JS;TC.loadProjDef({crs:"EPSG:25830",name:"ETRS89 / UTM zone 30N",def:"+proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs"});TC.loadProjDef({crs:"EPSG:4258",name:"ETRS89",def:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs +axis=neu"});TC.loadProjDef({crs:"EPSG:3040",name:"ETRS89 / UTM zone 28N (N-E)",def:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +axis=neu"});TC.loadProjDef({crs:"EPSG:3041",name:"ETRS89 / UTM zone 29N (N-E)",def:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +axis=neu"});TC.loadProjDef({crs:"EPSG:3042",name:"ETRS89 / UTM zone 30N (N-E)",def:"+proj=utm +zone=30 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +axis=neu"});TC.loadProjDef({crs:"EPSG:3043",name:"ETRS89 / UTM zone 31N (N-E)",def:"+proj=utm +zone=31 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +axis=neu"});TC.loadProjDef({crs:"EPSG:4230",name:"ED50",def:"+proj=longlat +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +no_defs +axis=neu"});TC.loadProjDef({crs:"EPSG:25828",name:"ETRS89 / UTM zone 28N",def:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"});TC.loadProjDef({crs:"EPSG:25829",name:"ETRS89 / UTM zone 29N",def:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"});TC.loadProjDef({crs:"EPSG:25831",name:"ETRS89 / UTM zone 31N",def:"+proj=utm +zone=31 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"});TC.Util||TC.syncLoadJS(TC.apiLocation+"TC/Util");TC.Cfg=TC.Util.extend(!0,{},TC.Defaults,TC.Cfg);TC.capabilities={};TC.capabilitiesWFS={};TC.describeFeatureType={};TC.cache={};TC.alert=function(e){alert(e)};TC.prompt=function(e,t,a){var o=prompt(e,t);TC.Util.isFunction(a)&&a(o)};TC.confirm=function(e,t,a){confirm(e)?TC.Util.isFunction(t)&&t():TC.Util.isFunction(a)&&a()};TC.error=function(e){window.console&&console.error(e)};TC.Map||TC.syncLoadJS(TC.apiLocation+"TC/Map");TC.wrap={Map:function(e){var t=this;t.parent=e;t.map=null;t.getMap=function(){return t._promise}},Layer:function(e){var t=this;t.parent=e;t.layer=null;TC.EventTarget.call(t);t.getLayer=function(){return t.layer?Promise.resolve(t.layer):t._promise};t.setLayer=function(e){t.layer=e}},layer:{Raster:function(){TC.wrap.Layer.apply(this,arguments)},Vector:function(){TC.wrap.Layer.apply(this,arguments)}},Control:function(e){this.parent=e},control:{Click:function(){TC.wrap.Control.apply(this,arguments)},ScaleBar:function(){TC.wrap.Control.apply(this,arguments)},NavBar:function(){TC.wrap.Control.apply(this,arguments)},NavBarHome:function(){TC.wrap.Control.apply(this,arguments)},Coordinates:function(){TC.wrap.Control.apply(this,arguments)},Search:function(){TC.wrap.Control.apply(this,arguments)},Measure:function(){TC.wrap.Control.apply(this,arguments)},OverviewMap:function(){TC.wrap.Control.apply(this,arguments)},FeatureInfo:function(){TC.wrap.Control.apply(this,arguments)},Popup:function(){TC.wrap.Control.apply(this,arguments)},GeometryFeatureInfo:function(){TC.wrap.Control.apply(this,arguments)},Geolocation:function(){TC.wrap.Control.apply(this,arguments)},Draw:function(){TC.wrap.Control.apply(this,arguments)},Modify:function(){TC.wrap.Control.apply(this,arguments)},OfflineMapMaker:function(){TC.wrap.Control.apply(this,arguments)},Edit:function(){TC.wrap.Control.apply(this,arguments)},ResultsPanel:function(){TC.wrap.Control.apply(this,arguments)}},Feature:function(){},Geometry:function(){}};TC.inherit(TC.wrap.Layer,TC.EventTarget);TC.inherit(TC.wrap.layer.Raster,TC.wrap.Layer);TC.inherit(TC.wrap.layer.Vector,TC.wrap.Layer);TC.inherit(TC.wrap.control.Click,TC.wrap.Control);TC.inherit(TC.wrap.control.ScaleBar,TC.wrap.Control);TC.inherit(TC.wrap.control.NavBar,TC.wrap.Control);TC.inherit(TC.wrap.control.NavBarHome,TC.wrap.Control);TC.inherit(TC.wrap.control.Coordinates,TC.wrap.Control);TC.inherit(TC.wrap.control.Measure,TC.wrap.Control);TC.inherit(TC.wrap.control.OverviewMap,TC.wrap.Control);TC.inherit(TC.wrap.control.Popup,TC.wrap.Control);TC.inherit(TC.wrap.control.FeatureInfo,TC.wrap.control.Click);TC.inherit(TC.wrap.control.GeometryFeatureInfo,TC.wrap.control.Click);TC.inherit(TC.wrap.control.Geolocation,TC.wrap.Control);TC.inherit(TC.wrap.control.Draw,TC.wrap.Control);TC.inherit(TC.wrap.control.OfflineMapMaker,TC.wrap.Control);TC.inherit(TC.wrap.control.Edit,TC.wrap.Control);TC.inherit(TC.wrap.control.ResultsPanel,TC.wrap.Control);TC.loadCSS(TC.apiLocation+"TC/css/tcmap.css");TC.loadJS(!TC.browserFeatures.urlParser(),TC.apiLocation+TC.Consts.url.URL_POLYFILL,function(){});var i={};TC.setPrefixUID=function(e,t){i[e]=t};TC.getUID=function(e){var t=i[e=e||""];t||(t=i[e]=1);var a=e+t;i[e]=t+1;return a};const l=/\+/g;function T(e){return e}function C(e){return decodeURIComponent(e.replace(l," "))}TC.cookie=function(e,t,a){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(t))||null===t)){a=TC.Util.extend({},a);null===t&&(a.expires=-1);if("number"==typeof a.expires){var o=a.expires,r=a.expires=new Date;r.setDate(r.getDate()+o)}t=String(t);return document.cookie=[encodeURIComponent(e),"=",a.raw?t:encodeURIComponent(t),a.expires?";expires="+a.expires.toUTCString():"",a.path?";path="+a.path:"",a.domain?";domain="+a.domain:"",a.secure?";secure":""].join("")}for(var n,s=(a=t||{}).raw?T:C,i=document.cookie.split("; "),l=0;n=i[l]&&i[l].split("=");l++)if(s(n.shift())===e)return s(n.join("="));return null}}()}document.addEventListener("DOMContentLoaded",function(){var e,t,a,o="Unknown library",r="OpenLayers";if(TC.Control){e="Compiled";window.ol&&(o=r+" "+ol.VERSION)}else{e="On demand";o=r}TC.version=TC.version+" ("+e+"; "+o+"; @ "+TC.apiLocation+")";TC.browser=TC.Util.getBrowser();TC.loadJS(!TC.Cfg.acceptedBrowserVersions,TC.apiLocation+"TC/config/browser-versions.js",function(e){TC._isSupported=!0;var t=TC.Cfg.acceptedBrowserVersions.filter(function(e){return e.name.toLowerCase()===TC.browser.name.toLowerCase()});if(t.length>0&&t[0].expired)TC.Cfg.loggingErrorsEnabled=!1;else{t.length>0&&!isNaN(t[0].version)&&TC.browser.version<t[0].version&&(TC._isSupported=!1);if(TC.Cfg.oldBrowserAlert&&!TC._isSupported){TC.Cfg.loggingErrorsEnabled=!1;const e=TC.Map.get(document.querySelector("."+TC.Consts.classes.MAP));TC.i18n.loadResources(!TC.i18n[e.options.locale],TC.apiLocation+"TC/resources/",e.options.locale).then(function(){TC.error(TC.Util.getLocaleString(e.options.locale,"outdatedBrowser"),TC.Consts.msgErrorMode.TOAST)})}}});/ip(ad|hone|od)/i.test(navigator.userAgent)&&(TC.Consts.event.CLICK="touchstart");if(TC.Cfg.loggingErrorsEnabled){window.JL||TC.syncLoadJS(TC.apiLocation+TC.Consts.url.JSNLOG);JL.defaultAjaxUrl=TC.Consts.url.ERROR_LOGGER;const e=(a=0,function(e){t=t||TC.Map.get(document.querySelector("."+TC.Consts.classes.MAP));var o,r,n,s="",i=-1,l=-1;if("unhandledrejection"===e.type){o=e.reason?e.reason.message:"";n=!e.reason||!e.reason.stack||e.reason.stack.indexOf(TC.apiLocation)>=0;r=e.reason}else{o=e.message;s=e.filename;i=e.lineno;l=e.colno;r=e.error;n=s.indexOf(TC.apiLocation)>=0}if((TC.Cfg.notifyApplicationErrors||n)&&a<TC.Cfg.maxErrorCount&&TC.Cfg.loggingErrorsEnabled){const e=t.getPreviousMapState(),C=function(t){var T=n?TC.Consts.text.API_ERROR:TC.Consts.text.APP_ERROR;JL("onerrorLogger").fatalException({msg:T,errorMsg:o,url:s,lineNumber:i,column:l,appUrl:t,apiVersion:TC.version,prevState:e,userAgent:navigator.userAgent},r);a++};let c=location.href;const p=t.exportControlStates()||[];if(p.length>0){var T=location.href;const e=T.indexOf("#");e>0&&(T=T.substring(0,e));t.getMapState({extraStates:{ctl:p}}).then(e=>{c=T.concat("#",e);C(c)})}else C(c);TC.isDebug||TC.i18n.loadResources(!TC.i18n[t.options.locale],TC.apiLocation+"TC/resources/",t.options.locale).then(function(){TC.error(TC.Util.getLocaleString(t.options.locale,"genericError")+(t.options.contactEmail||"webmaster@itracasa.es"),{type:TC.Consts.msgType.ERROR})})}return!1});window.addEventListener("error",e,!1);window.addEventListener("unhandledrejection",e,!1)}});var TC,SITNA=window.SITNA||{};(TC=window.TC||{}).isDebug=!1;SITNA.Consts=TC.Consts;SITNA.Cfg=TC.Cfg;SITNA.Cfg.layout=TC.apiLocation+"TC/layout/responsive";SITNA.Map=function(e,t){var a=this;if(TC.Cfg.controls.search){TC.Cfg.controls.search.allowedSearchTypes=TC.Util.extend(TC.Cfg.controls.search.allowedSearchTypes,{urban:{},street:{},number:{},cadastral:{}});if(t&&t.controls&&t.controls.search){var o=Object.keys(t.controls.search),r=TC.Util.extend(t.controls.search,{allowedSearchTypes:{}});o.forEach(function(e){if("boolean"==typeof t.controls.search[e]||TC.Util.isPlainObject(t.controls.search[e])){if(t.controls.search[e])switch(!0){case"placeName"===e:r.allowedSearchTypes[TC.Consts.searchType.PLACENAME]=TC.Util.isPlainObject(t.controls.search[e])?t.controls.search[e]:{};break;case"placeNameMunicipality"===e:r.allowedSearchTypes[TC.Consts.searchType.PLACENAMEMUNICIPALITY]=TC.Util.isPlainObject(t.controls.search[e])?t.controls.search[e]:{};break;case"postalAddress"===e:r.allowedSearchTypes[TC.Consts.searchType.NUMBER]=TC.Util.isPlainObject(t.controls.search[e])?t.controls.search[e]:{};break;case"cadastralParcel"===e:r.allowedSearchTypes[TC.Consts.searchType.CADASTRAL]=TC.Util.isPlainObject(t.controls.search[e])?t.controls.search[e]:{};break;case"town"===e:r.allowedSearchTypes[TC.Consts.searchType.URBAN]=TC.Util.isPlainObject(t.controls.search[e])?t.controls.search[e]:{};break;default:r.allowedSearchTypes[e]=TC.Util.isPlainObject(t.controls.search[e])?t.controls.search[e]:{}}delete r[e]}});t.controls.search=r}}TC.Cfg.controls.threeD&&SITNA.Cfg.views&&SITNA.Cfg.views.threeD&&(SITNA.Cfg.views.threeD.controls=["search","toc","attribution","basemapSelector","workLayerManager","layerCatalog","featureInfo","fullScreen","loadingIndicator","navBarHome","navBar","overviewMap","legend","threeD","coordinates","geolocation","resultsPanel","share"]);var n,s,i=new TC.Map(e,t);a.addLayer=function(e,t){i.addLayer(e,t)};a.setBaseLayer=function(e,t){i.setBaseLayer(e,t)};a.addMarker=function(e,t){i.addMarker(e,t)};a.zoomToMarkers=function(e){i.zoomToMarkers(e)};a.loaded=function(e){i.loaded(e)};i.loaded(function(){TC.loadJS(!TC.control.Search,TC.apiLocation+"TC/control/Search",function(){(n=new TC.control.Search).register(i);n.getLayer()&&n.getLayer().then(function(e){s=e})});if(!i.activeControl){var e=i.getControlsByClass("TC.control.FeatureInfo")[0];e&&e.activate()}});a.getQueryableData=function(e,t){var a=n.availableSearchTypes[e];if(a.queryableData)t&&t(a.queryableData);else{var o={request:"GetFeature",service:"WFS",typename:a.featurePrefix+":"+a.featureType,version:a.version,propertyname:(a.dataIdProperty instanceof Array?a.dataIdProperty:[a.dataIdProperty]).concat(a.outputProperties instanceof Array?a.outputProperties:[a.outputProperties]).join(","),outputformat:TC.Consts.format.JSON},r=a.url+"?"+TC.Util.getParamString(o);TC.ajax({url:r,responseType:TC.Consts.mimeType.JSON}).then(function(e){const o=e.data;a.queryableData=[];if(o.features)for(var r=o.features,s=0;s<r.length;s++){var i=r[s],l={id:[]};a.dataIdProperty instanceof Array||(a.dataIdProperty=[a.dataIdProperty]);for(var T=0;T<a.dataIdProperty.length;T++)i.properties.hasOwnProperty(a.dataIdProperty[T])&&l.id.push(i.properties[a.dataIdProperty[T]]);l.id=a.idPropertiesIdentifier?l.id.join(a.idPropertiesIdentifier):l.id.join("");l.label=[];a.outputProperties instanceof Array||(a.outputProperties=[a.outputProperties]);for(var C=0;C<a.outputProperties.length;C++)i.properties.hasOwnProperty(a.outputProperties[C])&&l.label.push(i.properties[a.outputProperties[C]]);var c=l.label instanceof Array&&l.label.join("").trim().length>0||!(l.label instanceof Array)&&l.label.trim().length>0;l.label=a.outputFormatLabel?a.outputFormatLabel.tcFormat(l.label):l.label.join("-");c&&a.queryableData.push(l)}a.queryableData=a.queryableData.sort(function(e,t){return a.idPropertiesIdentifier&&-1==e.id.indexOf(a.idPropertiesIdentifier)?n.removePunctuation(e.label)<n.removePunctuation(t.label)?-1:n.removePunctuation(e.label)>n.removePunctuation(t.label)?1:0:n.removePunctuation(e.label.split(" ")[0])<n.removePunctuation(t.label.split(" ")[0])?-1:n.removePunctuation(e.label.split(" ")[0])>n.removePunctuation(t.label.split(" ")[0])?1:0});a.queryableData=a.queryableData.filter(function(e,t,a){return t<1||e.id!==a[t-1].id&&e.label!==a[t-1].label});t&&t(a.queryableData)})}};a.getMunicipalities=function(e){a.getQueryableData(SITNA.Consts.mapSearchType.MUNICIPALITY,e)};a.getUrbanAreas=function(e){a.getQueryableData(SITNA.Consts.mapSearchType.URBAN,e)};a.getCommonwealths=function(e){a.getQueryableData(SITNA.Consts.mapSearchType.COMMONWEALTH,e)};a.getCouncils=function(e){a.getQueryableData(SITNA.Consts.mapSearchType.COUNCIL,e)};a.searchCommonwealth=function(e,t){a.searchTyped(SITNA.Consts.mapSearchType.COMMONWEALTH,e,t)};a.searchCouncil=function(e,t){a.searchTyped(SITNA.Consts.mapSearchType.COUNCIL,e,t)};a.searchUrbanArea=function(e,t){a.searchTyped(SITNA.Consts.mapSearchType.URBAN,e,t)};a.searchMunicipality=function(e,t){a.searchTyped(SITNA.Consts.mapSearchType.MUNICIPALITY,e,t)};a.searchTyped=function(e,t,o){var r=TC.getUID(),l=n.availableSearchTypes[e];t instanceof Array&&l.goToIdFormat&&(t=l.goToIdFormat.tcFormat(t));n._search.data=n._search.data||[];n._search.data.push({dataLayer:l.featureType,dataRole:e,id:t,label:"",text:""});a.removeSearch();if(n.availableSearchTypes[e]&&!n.getSearchTypeByRole(e)){n.availableSearchTypes[e].goTo||(n.availableSearchTypes[e].goTo=function(e){var t=function(e){TC.filter||TC.syncLoadJS(TC.apiLocation+"TC/Filter");var t=[];l.idPropertiesIdentifier&&(e=e.split(l.idPropertiesIdentifier));e instanceof Array||(e=[e]);for(var a=0;a<l.dataIdProperty.length;a++)t.push(new TC.filter.equalTo(l.dataIdProperty[a],e[a].trim()));return t=t.length>1?new TC.filter.and(t):t[0]}(e);return{params:{type:TC.Consts.layerType.WFS,url:this.url,version:this.version,geometryName:this.geometryName,featurePrefix:this.featurePrefix,featureType:this.featureType,properties:t,outputFormat:this.outputFormat,styles:this.styles}}}.bind(l));n.addAllowedSearchType(e,n.availableSearchTypes[e],n)}i.one(TC.Consts.event.SEARCHQUERYEMPTY,function(e){i.toast(n.EMPTY_RESULTS_LABEL,{type:TC.Consts.msgType.INFO,duration:5e3});o&&o(null)});i.one(TC.Consts.event.FEATURESADD,function(t){t.layer==s&&t.layer.features&&t.layer.features.length>0&&i.zoomToFeatures(t.layer.features);a.search={layer:t.layer,type:e};o&&o(t.layer.id!==r?t.layer.id:r)});n.goToResult(t,e)};a.searchFeature=function(e,t,o,r){var s=TC.getUID(),l=n.featurePrefix;a.removeSearch();e=(e||"").trim();t=(t||"").trim();o=(o||"").trim();if(0==e.length||0==t.length||0==o.length){i.toast(n.EMPTY_RESULTS_LABEL,{type:TC.Consts.msgType.INFO,duration:5e3});r&&r(null)}else{if(e.indexOf(":")>-1){l=e.split(":")[0];e=e.split(":")[1]}var T,C={id:s,type:SITNA.Consts.layerType.WFS,url:n.url,version:n.version,stealth:!0,geometryName:"the_geom",featurePrefix:l,featureType:e,maxFeatures:1,properties:function(e){TC.filter||TC.syncLoadJS(TC.apiLocation+"TC/Filter");if(e&&e instanceof Array){var t=e.map(function(e){if(!e.hasOwnProperty("type"))return new TC.filter.equalTo(e.name,e.value);switch(!0){case e.type==TC.Consts.comparison.EQUAL_TO:return new TC.filter.equalTo(e.name,e.value)}});return t.length>1?TC.filter.and.apply(null,t):t[0]}}([{name:t,value:o,type:TC.Consts.comparison.EQUAL_TO}]),outputFormat:TC.Consts.format.JSON};i.addLayer(C).then(function(e){T=e;a.search={layer:e,type:SITNA.Consts.mapSearchType.GENERIC}});i.on(TC.Consts.event.FEATURESADD,function(e){const t=e.layer;if(t==T&&t.features&&t.features.length>0){for(var a=0;a<t.features.length;a++)t.features[a].showsPopup!=n.queryableFeatures&&(t.features[a].showsPopup=n.queryableFeatures);i.zoomToFeatures(t.features)}});i.on(TC.Consts.event.LAYERUPDATE,function(e){const t=e.layer,a=e.newData;t==T&&a&&a.features&&0==a.features.length&&i.toast(n.EMPTY_RESULTS_LABEL,{type:TC.Consts.msgType.INFO,duration:5e3});r&&r(t==T&&a&&a.features&&0==a.features.length?null:s)})}};a.removeSearch=function(e){if(a.search)if(n.availableSearchTypes[a.search.type]&&n.availableSearchTypes[a.search.type].hasOwnProperty("goTo")){for(var t=0;t<a.search.layer.features.length;t++)a.search.layer.removeFeature(a.search.layer.features[t]);a.search=null}else i.removeLayer(a.search.layer).then(function(){a.search=null});e&&e()};a.exportImage=function(){return i.exportImage()};a.search=null};
//# sourceMappingURL=maps/sitna.min.js.map