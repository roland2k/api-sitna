{"version":3,"sources":["control/ControlContainer.js"],"names":["TC","control","Container","syncLoadJS","apiLocation","ControlContainer","self","this","apply","arguments","_classSelector","CLASS","Array","isArray","controlOptions","console","log","Object","keys","forEach","key","ctl","newCtl","position","side","options","push","inherit","ctlProto","prototype","POSITION","LEFT","RIGHT","SIDE","template","1","container","depth0","helpers","partials","data","stack1","alias1","nullContext","lookupProperty","parent","propertyName","hasOwnProperty","call","name","hash","loc","start","line","column","end","fn","program","inverse","noop","2","escapeExpression","lambda","4","compiler","main","useData","onRender","Promise","resolve","reject","bufferPromises","ctlCount","i","len","length","ctlName","filter","indexOf","map","addControl","Util","extend","id","uids","div","querySelector","all","then","containerControl","render","callback","_set1stRenderPromise","renderData","controls","index","idx","getRenderedHtml","html","document","createElement","innerHTML","trim","appendChild","content","firstChild","getUID","ctrl","addElement","li","setAttribute","addedElement","htmlElement","getAttribute"],"mappings":"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","sourcesContent":["TC.control = TC.control || {};\r\n\r\nif (!TC.control.Container) {\r\n    TC.syncLoadJS(TC.apiLocation + 'TC/Control/Container');\r\n}\r\n\r\nTC.control.ControlContainer = function () {\r\n    var self = this;\r\n\r\n    TC.control.Container.apply(self, arguments);\r\n\r\n    var cs = self._classSelector = '.' + self.CLASS;\r\n\r\n    // GLS: 20/01/2020 c칩digo compatibilidad hacia atr치s\r\n    if (!Array.isArray(self.controlOptions)) {\r\n        console.log('Gestionamos config de controlContainer antiguo');\r\n\r\n        var controlOptions = [];\r\n\r\n        Object.keys(self.controlOptions).forEach((key) => {\r\n            const ctl = self.controlOptions[key];\r\n            var newCtl = {\r\n                position: ctl.side\r\n            };\r\n\r\n            newCtl[key] = ctl.options;\r\n\r\n            controlOptions.push(newCtl);\r\n        });\r\n\r\n        self.controlOptions = controlOptions;\r\n    }\r\n};\r\n\r\nTC.inherit(TC.control.ControlContainer, TC.control.Container);\r\n\r\n(function () {\r\n    var ctlProto = TC.control.ControlContainer.prototype;\r\n\r\n    ctlProto.CLASS = 'tc-ctl-cctr';\r\n    ctlProto.POSITION = {\r\n        LEFT: \"left\",\r\n        RIGHT: \"right\"\r\n    };\r\n\r\n    // GLS: 20/01/2020 c칩digo compatibilidad hacia atr치s\r\n    ctlProto.SIDE = ctlProto.POSITION;\r\n\r\n    ctlProto.template = {};\r\n    ctlProto.template[ctlProto.CLASS] = TC.apiLocation + \"TC/templates/tc-ctl-cctr.hbs\";\r\n    ctlProto.template[ctlProto.CLASS + '-node'] = TC.apiLocation + \"TC/templates/tc-ctl-cctr-node.hbs\";\r\n\r\n    ctlProto.onRender = function () {\r\n        const self = this;\r\n\r\n        return new Promise(function (resolve, reject) {\r\n            const bufferPromises = new Array(self.ctlCount);\r\n\r\n            for (var i = 0, len = self.controlOptions.length; i < len; i++) {\r\n                var ctl = self.controlOptions[i];\r\n\r\n                var ctlName = Object.keys(ctl).filter((key) => {\r\n                    return [\"position\", \"index\"].indexOf(key) < 0;\r\n                })[0];\r\n                bufferPromises[i] = self.map.addControl(ctlName, TC.Util.extend({\r\n                    id: self.uids[i],\r\n                    div: self.div.querySelector('.' + self.CLASS + '-elm-' + i).querySelector('div')\r\n                }, ctl[ctlName]));\r\n            }\r\n\r\n            Promise.all(bufferPromises).then(function () {\r\n                for (var i = 0, len = arguments.length; i < len; i++) {\r\n                    var ctl = arguments[i];\r\n                    ctl.containerControl = self;\r\n                }\r\n                resolve(self);\r\n            });\r\n        });\r\n    };\r\n\r\n    ctlProto.render = function (callback) {\r\n        const self = this;\r\n        return self._set1stRenderPromise(self.renderData({\r\n            controls: Object.keys(self.controlOptions).map(function (key, i) {\r\n                return TC.Util.extend(self.controlOptions[key], { index: i });\r\n            })\r\n        }));\r\n    };\r\n\r\n    ctlProto.addControl = function (control, options) {\r\n        const self = this;\r\n        options.position = options.position || options.side || self.POSITION.LEFT;\r\n\r\n        return new Promise(function (resolve, reject) {\r\n            const idx = ++self.ctlCount;\r\n            self.getRenderedHtml(self.CLASS + '-node', { index: idx }, function (html) {\r\n                var template = document.createElement('template');\r\n                template.innerHTML = html.trim();\r\n\r\n                self.div.querySelector('ul.' + self.CLASS + '-' + options.position).appendChild(template.content ? template.content.firstChild : template.firstChild);\r\n                self.map.addControl(control, TC.Util.extend({\r\n                    id: self.getUID(),\r\n                    div: self.div.querySelector('.' + self.CLASS + '-elm-' + idx).querySelector('div')\r\n                }, options)).then(function (ctrl) {\r\n                    resolve(ctrl);\r\n                });\r\n            });\r\n        });\r\n    };\r\n\r\n    ctlProto.addElement = function (options) {\r\n        const self = this;\r\n\r\n        options.position = options.position || options.side || self.POSITION.LEFT;\r\n\r\n        var li = document.createElement('li');\r\n        li.setAttribute('class', (self.CLASS + '-elm ') + (self.CLASS + '-elm-' + self.ctlCount++ + ' '));\r\n\r\n        self.div.querySelector('ul.' + self.CLASS + '-' + options.position).appendChild(li);\r\n\r\n        var addedElement = li.appendChild(options.htmlElement);\r\n        addedElement.setAttribute('class', addedElement.getAttribute('class') + ' tc-ctl');\r\n        return addedElement;\r\n    };\r\n})();\r\n"]}