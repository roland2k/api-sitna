TC.control=TC.control||{};TC.control.Scale||TC.syncLoadJS(TC.apiLocation+"TC/control/Scale");TC.control.ScaleSelector=function(){TC.control.Scale.apply(this,arguments);this.scales=null};TC.inherit(TC.control.ScaleSelector,TC.control.Scale);!function(){var e=TC.control.ScaleSelector.prototype;e.CLASS="tc-ctl-ss";e.template={1:function(e,n,t,l,o){var a,r=e.escapeExpression,c=null!=n?n:e.nullContext||{},i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'    <option value="'+r(e.lambda(n,n))+'"'+(null!=(a=i(t,"if").call(c,i(t,"eq").call(c,n,null!=n?i(n,"scale"):n,{name:"eq",hash:{},data:o,loc:{start:{line:3,column:31},end:{line:3,column:43}}}),{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:25},end:{line:3,column:68}}}))?a:"")+">1:"+r(i(t,"round").call(c,n,{name:"round",hash:{},data:o,loc:{start:{line:3,column:71},end:{line:3,column:82}}}))+"</option>\r\n"},2:function(e,n,t,l,o){return' selected="true"'},compiler:[8,">= 4.3.0"],main:function(e,n,t,l,o){var a,r=null!=n?n:e.nullContext||{},c=e.escapeExpression,i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<div class="ol-scale-line ol-unselectable"><nobr><select>\r\n'+(null!=(a=i(t,"each").call(r,null!=n?i(n,"scales"):n,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:0},end:{line:4,column:9}}}))?a:"")+'</select> <input type="button" value="'+c(e.lambda(null!=n?i(n,"screenSize"):n,n))+"''\" title=\""+c(i(t,"i18n").call(r,"estimatedMapSize",{name:"i18n",hash:{},data:o,loc:{start:{line:5,column:63},end:{line:5,column:90}}}))+'" /></nobr></div>'},useData:!0};e.render=function(e){var n=this;return n._set1stRenderPromise(new Promise(function(t,l){if(n.map){!n.scales&&n.map.options.resolutions&&(n.scales=n.map.options.resolutions.map(n.getScale,n));var o=function(){n.scales=n.map.wrap.getResolutions().map(n.getScale,n);n.renderData({scale:n.getScale(),screenSize:TC.Cfg.screenSize,scales:n.scales},function(){n.div.querySelectorAll("option").forEach(function(e){e.textContent="1:"+n.format(e.textContent.substr(2))});n.div.querySelector('input[type="button"]').addEventListener(TC.Consts.event.CLICK,function(){n.setScreenSize()},{passive:!0});n.div.querySelector("select").addEventListener("change",function(){n.setScale(this.value)});TC.Util.isFunction(e)&&e();t()}).catch(function(e){l(e instanceof Error?e:Error(e))})};n.scales?o():n.map.wrap.getMap().then(o)}else l(Error("ScaleSelector no registrado"))}))};e.setScale=function(e){var n=.0254*e/this.getDpi(TC.Cfg.screenSize);window.devicePixelRatio&&(n/=window.devicePixelRatio);this.metersPerDegree&&(n/=this.metersPerDegree);this.map.wrap.setResolution(n);return n}}();
//# sourceMappingURL=../maps/control/ScaleSelector.min.js.map