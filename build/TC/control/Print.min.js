TC.control=TC.control||{};TC.Consts.classes.PRINTABLE="tc-printable";TC.control.Print=function(t){const n=this;n.options=t||{};n.ready=!1;n.title=n.options.title||TC.Util.getLocaleString(TC.Cfg.locale,"printPage");n.cssUrl=n.options.cssUrl||TC.apiLocation+"TC/css/print.css";if(n.options.target){(n.options.printableElement||n.options.target).classList.add(TC.Consts.classes.PRINTABLE);n.render()}};TC.inherit(TC.control.Print,TC.Control);!function(){const t=TC.control.Print.prototype;t.CLASS="tc-ctl-print";t.template={};t.template[t.CLASS]={compiler:[8,">= 4.3.0"],main:function(t,n,e,r,i){var o=null!=n?n:t.nullContext||{},l=t.escapeExpression,s=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'<a class="tc-icon-btn tc-ctl-print-btn" title="'+l(s(e,"i18n").call(o,"printThisWindow",{name:"i18n",hash:{},data:i,loc:{start:{line:1,column:47},end:{line:1,column:73}}}))+'">'+l(s(e,"i18n").call(o,"print",{name:"i18n",hash:{},data:i,loc:{start:{line:1,column:75},end:{line:1,column:91}}}))+"</a>"},useData:!0};t.template[t.CLASS+"-page"]={compiler:[8,">= 4.3.0"],main:function(t,n,e,r,i){var o,l=t.lambda,s=t.escapeExpression,c=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'<!DOCTYPE html>\r\n<html xmlns="http://www.w3.org/1999/xhtml">\r\n<head>\r\n    <title>'+s(l(null!=n?c(n,"title"):n,n))+'</title>\r\n    <link rel="stylesheet" href="'+s(l(null!=n?c(n,"cssUrl"):n,n))+'" />\r\n</head>\r\n<body onload="print()" class="tc-ctl-print-page">\r\n    <h1>'+s(l(null!=n?c(n,"title"):n,n))+"</h1>\r\n    "+(null!=(o=l(null!=n?c(n,"content"):n,n))?o:"")+"\r\n</body>\r\n</html>\r\n"},useData:!0};t.renderPrintPage=function(){const t=open(null,this.CLASS),n=(this.options.printableElement||this.options.target).innerHTML;this.getRenderedHtml(this.CLASS+"-page",{title:this.title,content:n,cssUrl:this.cssUrl}).then(function(n){t.document.write(n);t.document.close();t.focus()}).catch(function(t){TC.error(t)})};t.getRenderTarget=function(){return this.options.target||this.div};t.addUIEventListeners=function(){const t=this;if(t._mustAddListeners){const n=t.getRenderTarget();if(n){const e=n.querySelector("."+t.CLASS+"-btn");if(e){e.addEventListener("click",function(n){t.renderPrintPage()});delete t._mustAddListeners}}}};t.renderData=function(t,n){const e=this;return new Promise(function(r,i){if(e.div)TC.Control.prototype.renderData.call(e,t,n).then(()=>r()).catch(t=>i(t));else{const t=e.getRenderTarget();if(t)e.getRenderedHtml(e.CLASS,null).then(function(i){if(!t.querySelector("."+e.CLASS+"-btn")){e._mustAddListeners=!0;t.insertAdjacentHTML("beforeend",i)}TC.Util.isFunction(n)&&n();r()});else{TC.Util.isFunction(n)&&n();r()}}})}}();
//# sourceMappingURL=../maps/control/Print.min.js.map