TC.control=TC.control||{};TC.Control||TC.syncLoadJS(TC.apiLocation+"TC/Control");TC.control.FullScreen=function(){TC.Control.apply(this,arguments)};TC.inherit(TC.control.FullScreen,TC.Control);!function(){var e=TC.control.FullScreen.prototype;e.CLASS="tc-ctl-fscreen";e.template={compiler:[8,">= 4.3.0"],main:function(e,n,t,l,r){var c=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<button class="tc-ctl-fscreen-btn tc-float-btn" title="'+e.escapeExpression(c(t,"i18n").call(null!=n?n:e.nullContext||{},"fscreen.tip",{name:"i18n",hash:{},data:r,loc:{start:{line:1,column:55},end:{line:1,column:77}}}))+'"></button>'},useData:!0};const n={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},t=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],l=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],r=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"],c="undefined"!=typeof window&&void 0!==window.document?window.document:{},s="fullscreenEnabled"in c&&Object.keys(n)||t[0]in c&&t||l[0]in c&&l||r[0]in c&&r||[];e.fscreen={inFullscreen:!1,requestFullscreen:e=>e[s[n.requestFullscreen]](),requestFullscreenFunction:e=>e[s[n.requestFullscreen]],get exitFullscreen(){return c[s[n.exitFullscreen]].bind(c)},addEventListener:(e,t,l)=>c.addEventListener(s[n[e]],t,l),removeEventListener:(e,t,l)=>c.removeEventListener(s[n[e]],t,l),get fullscreenEnabled(){return Boolean(c[s[n.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return c[s[n.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return c[("on"+s[n.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return c[("on"+s[n.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return c["on"+s[n.fullscreenerror].toLowerCase()]},set onfullscreenerror(e){return c["on"+s[n.fullscreenerror].toLowerCase()]=e}};e.register=function(e){const n=this,t=TC.Control.prototype.register.call(n,e);t.then(function(){const e=n.div.querySelector("."+n.CLASS+"-btn");if(n.fscreen.fullscreenEnabled){const t=()=>{e.classList.toggle(TC.Consts.classes.ACTIVE,n.fscreen.inFullscreen);e.setAttribute("title",n.fscreen.inFullscreen?n.getLocaleString("fscreen.tip.return"):n.getLocaleString("fscreen.tip"))};n.fscreen.addEventListener("fullscreenchange",()=>{n.fscreen.inFullscreen=null!==n.fscreen.fullscreenElement;t()},!1);e.addEventListener("click",function(){n.byBtn=!0;n.fscreen.inFullscreen?n.fscreen.exitFullscreen():n.fscreen.requestFullscreen(c.body)},!1);TC.Util.detectMobile()||window.addEventListener("resize",()=>{if(n.byBtn){n.byBtn=!1;return}const l=window.innerWidth*window.devicePixelRatio,r=window.innerHeight*window.devicePixelRatio,s=window.screen.width,o=window.screen.height;n.fscreen.inFullscreen=l/s>=.95&&r/o>=.95;t();let i=c.body.getElementsByTagName("header");if(n.fscreen.inFullscreen){e.setAttribute("disabled","disabled");i.length>0&&i[0].classList.add("tc-ctl-fscreenToHeader");n.map.div.classList.add("tc-ctl-fscreenToMap");n.map.view3D&&n.map.view3D.container.classList.add("tc-ctl-fscreenToMap")}else{e.removeAttribute("disabled");i.length>0&&i[0].classList.remove("tc-ctl-fscreenToHeader");n.map.div.classList.remove("tc-ctl-fscreenToMap");n.map.view3D&&n.map.view3D.container.classList.remove("tc-ctl-fscreenToMap")}e.setAttribute("title",n.fscreen.inFullscreen?n.getLocaleString("fscreen.tip.keyboard"):n.getLocaleString("fscreen.tip"));const u=c.createEvent("HTMLEvents");u.initEvent("resize",!1,!1);n.map.div.dispatchEvent(u)})}else n.disable()});return t}}();
//# sourceMappingURL=../maps/control/FullScreen.min.js.map