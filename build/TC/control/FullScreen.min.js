TC.control=TC.control||{};TC.Control||TC.syncLoadJS(TC.apiLocation+"TC/Control");TC.control.FullScreen=function(){TC.Control.apply(this,arguments)};TC.inherit(TC.control.FullScreen,TC.Control);!function(){var e=TC.control.FullScreen.prototype;e.CLASS="tc-ctl-fscreen";e.template={compiler:[8,">= 4.3.0"],main:function(e,n,l,t,r){var s=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<button class="tc-ctl-fscreen-btn" title="'+e.escapeExpression(s(l,"i18n").call(null!=n?n:e.nullContext||{},"fscreen.tip",{name:"i18n",hash:{},data:r,loc:{start:{line:1,column:42},end:{line:1,column:64}}}))+'"></button>'},useData:!0};const n={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},l=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],t=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],r=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"],s="undefined"!=typeof window&&void 0!==window.document?window.document:{},c="fullscreenEnabled"in s&&Object.keys(n)||l[0]in s&&l||t[0]in s&&t||r[0]in s&&r||[];e.fscreen={inFullscreen:!1,requestFullscreen:e=>e[c[n.requestFullscreen]](),requestFullscreenFunction:e=>e[c[n.requestFullscreen]],get exitFullscreen(){return s[c[n.exitFullscreen]].bind(s)},addEventListener:(e,l,t)=>s.addEventListener(c[n[e]],l,t),removeEventListener:(e,l,t)=>s.removeEventListener(c[n[e]],l,t),get fullscreenEnabled(){return Boolean(s[c[n.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return s[c[n.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return s[("on"+c[n.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return s[("on"+c[n.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return s["on"+c[n.fullscreenerror].toLowerCase()]},set onfullscreenerror(e){return s["on"+c[n.fullscreenerror].toLowerCase()]=e}};e.register=function(e){const n=this,l=TC.Control.prototype.register.call(n,e);l.then(function(){const e=n.div.querySelector("."+n.CLASS+"-btn");if(n.fscreen.fullscreenEnabled){const l=()=>{e.classList.toggle(TC.Consts.classes.ACTIVE,n.fscreen.inFullscreen);e.setAttribute("title",n.fscreen.inFullscreen?n.getLocaleString("fscreen.tip.return"):n.getLocaleString("fscreen.tip"))};n.fscreen.addEventListener("fullscreenchange",()=>{n.fscreen.inFullscreen=null!==n.fscreen.fullscreenElement;l()},!1);e.addEventListener("click",function(){n.byBtn=!0;n.fscreen.inFullscreen?n.fscreen.exitFullscreen():n.fscreen.requestFullscreen(s.body)},!1);TC.Util.detectMobile()||window.addEventListener("resize",()=>{if(n.byBtn){n.byBtn=!1;return}const t=window.innerWidth*window.devicePixelRatio,r=window.innerHeight*window.devicePixelRatio,c=window.screen.width,i=window.screen.height;n.fscreen.inFullscreen=t/c>=.95&&r/i>=.95;l();let o=s.body.getElementsByTagName("header");if(n.fscreen.inFullscreen){e.setAttribute("disabled","disabled");o.length>0&&o[0].classList.add("tc-ctl-fscreenToHeader");n.map.div.classList.add("tc-ctl-fscreenToMap");n.map.view3D&&n.map.view3D.container.classList.add("tc-ctl-fscreenToMap")}else{e.removeAttribute("disabled");o.length>0&&o[0].classList.remove("tc-ctl-fscreenToHeader");n.map.div.classList.remove("tc-ctl-fscreenToMap");n.map.view3D&&n.map.view3D.container.classList.remove("tc-ctl-fscreenToMap")}e.setAttribute("title",n.fscreen.inFullscreen?n.getLocaleString("fscreen.tip.keyboard"):n.getLocaleString("fscreen.tip"));const u=s.createEvent("HTMLEvents");u.initEvent("resize",!1,!1);n.map.div.dispatchEvent(u)})}else n.disable()});return l}}();
//# sourceMappingURL=../maps/control/FullScreen.min.js.map