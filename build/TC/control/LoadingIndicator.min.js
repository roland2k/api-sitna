TC.control=TC.control||{};TC.Control||TC.syncLoadJS(TC.apiLocation+"TC/Control");TC.control.LoadingIndicator=function(){const t=this;TC.Control.apply(t,arguments);t._waits={};window.addEventListener("error",function(){t.reset();return!1},!1)};TC.inherit(TC.control.LoadingIndicator,TC.Control);!function(){var t=TC.control.LoadingIndicator.prototype;t.CLASS="tc-ctl-load";t.template={compiler:[8,">= 4.3.0"],main:function(t,o,n,s,i){return'<div class="tc-ctl-load-bar">\r\n    <div class="tc-ctl-load-dots tc-ctl-load-dot1"> </div>\r\n    <div class="tc-ctl-load-dots tc-ctl-load-dot2"> </div>\r\n    <div class="tc-ctl-load-dots tc-ctl-load-dot3"> </div>\r\n    <div class="tc-ctl-load-dots tc-ctl-load-dot4"> </div>\r\n    <div class="tc-ctl-load-dots tc-ctl-load-dot5"> </div>\r\n    <div class="tc-ctl-load-dots tc-ctl-load-dot6"> </div>\r\n    <div class="tc-ctl-load-dots tc-ctl-load-dot7"> </div>\r\n    <div class="tc-ctl-load-dots tc-ctl-load-dot8"> </div>\r\n</div>'},useData:!0};t.startWait=function(t){const o=this,n=t.layer.id;void 0===o._waits[n]&&(o._waits[n]=0);o._waits[n]=o._waits[n]+1;o.show();o.map.trigger(TC.Consts.event.STARTLOADING)};t.stopWait=function(t){const o=this,n=t.layer.id;var s=o._waits[n];s>0&&(s=o._waits[n]=s-1);s||delete o._waits[n];var i=0;for(var e in o._waits)i++;if(!i){o.hide();o.map.trigger(TC.Consts.event.STOPLOADING)}};t.endWait=function(t){const o=this,n=t.layer.id;o._waits[n]>0&&delete o._waits[n];var s=0;for(var i in o._waits)s++;if(!s){o.hide();o.map.trigger(TC.Consts.event.STOPLOADING)}};t.reset=function(t){this._waits={};this.hide();this.map.trigger(TC.Consts.event.STOPLOADING)};t.register=function(t){const o=this,n=TC.Control.prototype.register.call(o,t);t.on(TC.Consts.event.BEFORELAYERADD+" "+TC.Consts.event.BEFORELAYERUPDATE+" "+TC.Consts.event.BEFOREFEATURESADD,function(t){o.startWait(t)}).on(TC.Consts.event.LAYERADD+" "+TC.Consts.event.LAYERERROR+" "+TC.Consts.event.LAYERUPDATE+" "+TC.Consts.event.FEATURESADD,function(t){o.stopWait(t)}).on(TC.Consts.event.BEFOREFEATUREINFO,function(){o.addWait(TC.Consts.event.FEATUREINFO)}).on(TC.Consts.event.FEATUREINFO+" "+TC.Consts.event.NOFEATUREINFO+" "+TC.Consts.event.FEATUREINFOERROR,function(){o.removeWait(TC.Consts.event.FEATUREINFO)}).on(TC.Consts.event.LAYERREMOVE,function(t){o.endWait(t)});TC.isDebug||window.addEventListener("error",function(t,n,s,i,e){o.reset();return!1});return n};t.addWait=function(t){const o=t||TC.getUID();this.startWait({layer:{id:o}});return o};t.removeWait=function(t){this.stopWait({layer:{id:t}})}}();
//# sourceMappingURL=../maps/control/LoadingIndicator.min.js.map