TC.tool=TC.tool||{};TC.tool.ElevationService=function(o){const e=this;e.options=o||{};e.url=e.options.url;e.process=e.options.process;e.minimumElevation=e.options.minimumElevation;$.isFunction(e.options.request)&&(e.request=e.options.request);$.isFunction(e.options.parseResponse)&&(e.parseResponse=e.options.parseResponse)};!function(){const o=TC.tool.ElevationService.prototype;o.getElevation=function(o){const e=this;void 0===(o=o||{}).resolution&&(o.resolution=e.options.resolution);void 0===o.sampleNumber&&(o.sampleNumber=e.options.sampleNumber);const t=$.Deferred();TC.loadJS(!TC.Geometry,TC.apiLocation+"TC/Geometry",function(){e.request(o).then(function(n){t.resolve((o.responseCallback||e.parseResponse).call(e,n,o))},function(o){t.reject(o)})});return t.promise()};o.request=function(o){const e=this;o=o||{};const t=$.Deferred();o.dataInputs||o.body?TC.loadJS(!TC.format||!TC.format.WPS,TC.apiLocation+"TC/format/WPS",function(){const n={process:o.process||e.process,dataInputs:o.dataInputs,responseType:TC.Consts.mimeType.JSON,version:o.serviceVersion||e.serviceVersion||"1.0.0",output:o.output},s="boolean"==typeof o.contentType?o.contentType:o.contentType||TC.Consts.mimeType.XML;$.ajax({url:e.url,type:"POST",contentType:s,data:o.body||TC.format.WPS.buildExecuteQuery(n)}).then(function(o){t.resolve(o)},function(o){t.reject(o)})}):t.reject();return t.promise()};o.parseResponse=function(o,e){var t=this;if(o.coordinates){o.coordinates.forEach(function(o){o[2]<t.minimumElevation&&(o[2]=null)})}return o.coordinates||[]}}();