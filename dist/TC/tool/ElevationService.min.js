TC.tool=TC.tool||{};TC.tool.ElevationService=function(o){const e=this;e.options=o||{};e.url=e.options.url;e.process=e.options.process;e.minimumElevation=e.options.minimumElevation;TC.Util.isFunction(e.options.request)&&(e.request=e.options.request);TC.Util.isFunction(e.options.parseResponse)&&(e.parseResponse=e.options.parseResponse)};!function(){const o=TC.tool.ElevationService.prototype;o.getElevation=function(o){const e=this;void 0===(o=o||{}).resolution&&(o.resolution=e.options.resolution);void 0===o.sampleNumber&&(o.sampleNumber=e.options.sampleNumber);return new Promise(function(t,n){TC.loadJS(!TC.Geometry,TC.apiLocation+"TC/Geometry",function(){e.request(o).then(function(n){t((o.responseCallback||e.parseResponse).call(e,n,o))}).catch(function(o){n(o instanceof Error?o:Error(o))})})})};o.request=function(o){const e=this;o=o||{};return new Promise(function(t,n){o.dataInputs||o.body?TC.loadJS(!TC.format||!TC.format.WPS,TC.apiLocation+"TC/format/WPS",function(){const s={process:o.process||e.process,dataInputs:o.dataInputs,responseType:TC.Consts.mimeType.JSON,version:o.serviceVersion||e.serviceVersion||"1.0.0",output:o.output},i="boolean"==typeof o.contentType?o.contentType:o.contentType||TC.Consts.mimeType.XML;TC.ajax({url:e.url,method:"POST",contentType:i,responseType:TC.Consts.mimeType.JSON,data:o.body||TC.format.WPS.buildExecuteQuery(s)}).then(function(o){t(o.data)},function(o){n(o instanceof Error?o:Error(o))})}):n(Error("Request is not valid for elevation service"))})};o.parseResponse=function(o,e){var t=this;if(o.coordinates){o.coordinates.forEach(function(o){o[2]<t.minimumElevation&&(o[2]=null)})}return o.coordinates||[]};o.cancelRequest=function(o){}}();